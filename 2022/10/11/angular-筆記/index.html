<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/gg.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/gg.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/gg.png">
  <link rel="mask-icon" href="/images/gg.png" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-171640966-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-171640966-1');
</script>

<style>
    @font-face {
        /* font-family: "JasonHandwriting1-Regular"; */
/*
        src: url(https://cdn.jsdelivr.net/gh/max32002/JasonHandWritingFonts@20210716/webfont/JasonHandwriting1-Regular.woff2) format("woff2"), url(https://cdn.jsdelivr.net/gh/max32002/JasonHandWritingFonts@20210716/webfont/JasonHandwriting1-Regular.woff) format("woff");
		*/

        font-family: "俐方體11號";
        src: url(/fonts/Cubic_11_1.000_R.woff) format("woff")
    }
</style>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.blog.lasai.com.tw","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="&amp;nbsp;">
<meta property="og:type" content="article">
<meta property="og:title" content="angular 筆記">
<meta property="og:url" content="https://www.blog.lasai.com.tw/2022/10/11/angular-%E7%AD%86%E8%A8%98/index.html">
<meta property="og:site_name" content="🌹 喇賽的人 Blog 🌹">
<meta property="og:description" content="&amp;nbsp;">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://angular.tw/assets/images/logos/angular/angular.svg">
<meta property="article:published_time" content="2022-10-11T10:26:18.000Z">
<meta property="article:modified_time" content="2025-02-19T09:29:19.093Z">
<meta property="article:author" content="🌹 喇賽人 🌹">
<meta property="article:tag" content="angular">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://angular.tw/assets/images/logos/angular/angular.svg">

<link rel="canonical" href="https://www.blog.lasai.com.tw/2022/10/11/angular-%E7%AD%86%E8%A8%98/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>

  <title>angular 筆記 | 🌹 喇賽的人 Blog 🌹</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-171640966-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-171640966-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

  <!-- google ad -->
  <!--
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1069539516107706"
     crossorigin="anonymous"></script>
  -->
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!--
  <div class="spell" ></div>
  <div class="ghost" style="display: none;"></div>
  <div class="noise"></div>
  <div class="noise2"></div>
  -->


  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">🌹 喇賽的人 Blog 🌹</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">🌹 喇低喇賽 🌹</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>真喇賽</a>

  </li>
        <li class="menu-item menu-item-map">

    <a href="/map/" rel="section"><i class="fa fa-map fa-fw"></i>喇賽人的奇怪美食地圖</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>關於喇賽人</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>喇賽的標籤</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>喇賽亂寫</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://www.blog.lasai.com.tw/2022/10/11/angular-%E7%AD%86%E8%A8%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="🌹 喇賽人 🌹">
      <meta itemprop="description" content="🌹 喇賽人的 Blog 🌹">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="🌹 喇賽的人 Blog 🌹">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          angular 筆記
        </h1>

        <div class="post-meta">
		
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">亂寫於</span>

              <time title="亂入時間：2022-10-11 18:26:18" itemprop="dateCreated datePublished" datetime="2022-10-11T18:26:18+08:00">2022-10-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2025-02-19 17:29:19" itemprop="dateModified" datetime="2025-02-19T17:29:19+08:00">2025-02-19</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2022/10/11/angular-%E7%AD%86%E8%A8%98/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/10/11/angular-筆記/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="廢話字數">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">廢話字數：</span>
              <span>80k</span>
            </span>
            <span class="post-meta-item" title="所需傷眼時間">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">所需傷眼時間 &asymp;</span>
              <span>1:13</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>&nbsp;<br><img src="https://angular.tw/assets/images/logos/angular/angular.svg" alt="angular"></p>
<a id="more"></a>

<p>差不多一年前短暫搞過 Angular , 後來又忙其他事 , 現在又被抓回來搞 , 已經完全忘光 XD 甚至連 css 要怎麼寫都不太記得了 , 更何況 Angular QQ , 有種越寫越兩光的 fu ~</p>
<h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><p>注意現在最新版為 <code>version 1.78</code> 會造成 <code>typescript language service</code> 發生不明錯誤</p>
<p>我降回 1.75 就沒事了 <a href="https://code.visualstudio.com/updates/v1_75" target="_blank" rel="noopener">https://code.visualstudio.com/updates/v1_75</a><br>記得選 <code>Downloads: Windows: User</code></p>
<p>另外他好像會自動更新 , 記得要在 <code>settings.json</code> 設定</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;update.mode&quot;: &quot;manual&quot;,</span><br><span class="line">&quot;update.enableWindowsBackgroundUpdates&quot;: false</span><br></pre></td></tr></table></figure>

<p>如果你已經中標解除安裝前可以用以下命令去列出 extension 清單 , 並且安裝完後可以還原</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">code -<span class="literal">-list</span><span class="literal">-extensions</span> &gt; extensions.list</span><br><span class="line">cat extensions.list |% &#123; code -<span class="literal">-install</span><span class="literal">-extension</span> <span class="variable">$_</span>&#125;</span><br></pre></td></tr></table></figure>

<p>記得先備份底下的 <code>keybindings.json</code> <code>settings.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%APPDATA%&#x2F;Code&#x2F;User</span><br></pre></td></tr></table></figure>

<h3 id="Angular-Cli"><a href="#Angular-Cli" class="headerlink" title="Angular Cli"></a>Angular Cli</h3><h4 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h4><p><a href="https://angular.tw/guide/setup-local#install-the-angular-cli" target="_blank" rel="noopener">看這篇</a></p>
<p>裝好 nodejs 要重啟 terminal</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gsudo choco install nodejs</span><br><span class="line">node --version</span><br><span class="line">npm install --global @angular&#x2F;cli</span><br></pre></td></tr></table></figure>

<p>我先安裝 angular cli , 然後馬上噴 error , 折磨了一翻發現我的 nodejs 版本為 16.10.x 現在最新版為 16.17.01 (<a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a>)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @angular&#x2F;cli</span><br></pre></td></tr></table></figure>
<p>其他可以看<a href="https://gist.github.com/doggy8088/15e434b43992cf25a78700438743774a" target="_blank" rel="noopener">保哥這份說明</a></p>
<h4 id="加入-eslint"><a href="#加入-eslint" class="headerlink" title="加入 eslint"></a>加入 eslint</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng add @angular-eslint&#x2F;schematics</span><br></pre></td></tr></table></figure>

<h4 id="ng-參數"><a href="#ng-參數" class="headerlink" title="ng 參數"></a>ng 參數</h4><p>萬事起頭難 , 還好 angular 的 help 還算友善<br><code>ng new --help</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    --help                Shows a help message for this command in the console.                                                                                                  [boolean]</span><br><span class="line">    --interactive         Enable interactive input prompts.                                                                                                      [boolean] [default: true]</span><br><span class="line">    --dry-run             Run through and reports activity without writing out results.                                                                         [boolean] [default: false]</span><br><span class="line">    --defaults            Disable interactive input prompts for options with a default.                                                                         [boolean] [default: false]</span><br><span class="line">    --force               Force overwriting of existing files.                                                                                                  [boolean] [default: false]</span><br><span class="line">-c, --collection          A collection of schematics to use in generating the initial application.                                                                                [string]</span><br><span class="line">    --commit              Initial git repository commit information.                                                                                             [boolean] [default: true]</span><br><span class="line">    --create-application  Create a new initial application project in the &#39;src&#39; folder of the new workspace. When false, creates an empty workspace with no initial application. You can</span><br><span class="line">                          then use the generate application command so that all applications are created in the projects folder.                                 [boolean] [default: true]</span><br><span class="line">    --directory           The directory name to create the workspace in.                                                                                                          [string]</span><br><span class="line">-s, --inline-style        Include styles inline in the component TS file. By default, an external styles file is created and referenced in the component TypeScript file.        [boolean]</span><br><span class="line">-t, --inline-template     Include template inline in the component TS file. By default, an external template file is created and referenced in the component TypeScript file.    [boolean]</span><br><span class="line">    --minimal             Create a workspace without any testing frameworks. (Use for learning purposes only.)                                                  [boolean] [default: false]</span><br><span class="line">    --new-project-root    The path where new projects will be created, relative to the new workspace root.                                                  [string] [default: &quot;projects&quot;]</span><br><span class="line">    --package-manager     The package manager used to install dependencies.                                                              [string] [choices: &quot;npm&quot;, &quot;yarn&quot;, &quot;pnpm&quot;, &quot;cnpm&quot;]</span><br><span class="line">-p, --prefix              The prefix to apply to generated selectors for the initial project.                                                                    [string] [default: &quot;app&quot;]</span><br><span class="line">    --routing             Generate a routing module for the initial project.                                                                                                     [boolean]</span><br><span class="line">-g, --skip-git            Do not initialize a git repository.                                                                                                   [boolean] [default: false]</span><br><span class="line">    --skip-install        Do not install dependency packages.                                                                                                   [boolean] [default: false]</span><br><span class="line">-S, --skip-tests          Do not generate &quot;spec.ts&quot; test files for the new project.                                                                             [boolean] [default: false]</span><br><span class="line">    --strict              Creates a workspace with stricter type checking and stricter bundle budgets settings. This setting helps improve maintainability and catch bugs ahead of time.</span><br><span class="line">                          For more information, see https:&#x2F;&#x2F;angular.io&#x2F;guide&#x2F;strict-mode                                                                         [boolean] [default: true]</span><br><span class="line">    --style               The file extension or preprocessor to use for style files.                                                     [string] [choices: &quot;css&quot;, &quot;scss&quot;, &quot;sass&quot;, &quot;less&quot;]</span><br><span class="line">    --view-encapsulation  The view encapsulation strategy to use in the initial project.                                               [string] [choices: &quot;Emulated&quot;, &quot;None&quot;, &quot;ShadowDom&quot;]</span><br></pre></td></tr></table></figure>

<p>因為剛搞對嚴格模式的 debug 能力不太好 , 另外每次都要問你 routing &amp; css 覺得很煩可以這樣下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng new practice --strict&#x3D;false --style&#x3D;css --routing&#x3D;true</span><br></pre></td></tr></table></figure>

<p>此外想安裝其他 lib 的話 cd 進去就對啦 , 印象中 <code>--save-dev</code> 好像是開發期間才會用到?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd practice</span><br><span class="line">npm install font-awesome@4.7.0</span><br><span class="line">npm install --save-dev json-server</span><br></pre></td></tr></table></figure>





<h3 id="啟動"><a href="#啟動" class="headerlink" title="啟動"></a>啟動</h3><p>首先找到 <code>package.json</code> 這個檔案 , 接著看到 <code>scripts</code> 裡面有一堆可以執行的選項 , 看是要做啥就去做對應的調整<br>啟動專案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>
<p>跑起來預設為 <code>http://localhost:4200/</code> 好像沒衝到 port 就用預設的吧</p>
<p>另外因為要讓同事在同網段可以看到 , 所以可以多補這個 <code>npm run starthost</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">	&quot;starthost&quot;: &quot;ng serve --host 0.0.0.0 --disable-host-check&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h3><p><a href="https://code.visualstudio.com/docs/nodejs/angular-tutorial" target="_blank" rel="noopener">參考這裡</a><br>在 vscode 點蟲蟲 <code>Run And Debug</code> 他會幫你加上資料夾 &amp; 設定 <code>.vscode\launch.json</code><br>接著修改 json 改成你的 port 4200 就好了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; Use IntelliSense to learn about possible attributes.</span><br><span class="line">    &#x2F;&#x2F; Hover to view descriptions of existing attributes.</span><br><span class="line">    &#x2F;&#x2F; For more information, visit: https:&#x2F;&#x2F;go.microsoft.com&#x2F;fwlink&#x2F;?linkid&#x3D;830387</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;chrome&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;Launch Chrome against localhost&quot;,</span><br><span class="line">            &quot;url&quot;: &quot;http:&#x2F;&#x2F;localhost:4200&quot;,</span><br><span class="line">            &quot;webRoot&quot;: &quot;$&#123;workspaceFolder&#125;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不然就直接 <code>Debug Url</code> 然後填 <code>http://localhost:4200</code> 也可以</p>
<h3 id="注入"><a href="#注入" class="headerlink" title="注入"></a>注入</h3><p>如果用 angular schematics 幫你產 service 預設會長下面這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Injectable &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line"></span><br><span class="line">@Injectable(&#123;</span><br><span class="line">  providedIn: &#39;root&#39;</span><br><span class="line">&#125;)</span><br><span class="line">export class LoadingService &#123;</span><br><span class="line">  constructor() &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意到 <code>providedIn: &#39;root&#39;</code> 的部分 , 表示直接注入在 global , 然後都指到一個 instance , 等價在 <code>app.module.ts</code> 裡面的 <code>provideers</code> 裡面自己手寫這個部分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import &#123; NgModule &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; BrowserModule &#125; from &#39;@angular&#x2F;platform-browser&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; AppRoutingModule &#125; from &#39;.&#x2F;app-routing.module&#39;;</span><br><span class="line">import &#123; AppComponent &#125; from &#39;.&#x2F;app.component&#39;;</span><br><span class="line">import &#123; MapComponent &#125; from &#39;.&#x2F;map&#x2F;map.component&#39;;</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">	declarations: [</span><br><span class="line">		AppComponent,</span><br><span class="line">		MapComponent</span><br><span class="line">	],</span><br><span class="line">	imports: [</span><br><span class="line">		BrowserModule,</span><br><span class="line">		AppRoutingModule</span><br><span class="line"></span><br><span class="line">	],</span><br><span class="line">	providers:[</span><br><span class="line">		LoadingService</span><br><span class="line">	],</span><br><span class="line">	bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure>


<p>如果想每次用不同的 instance 就不要加上 <code>providedIn: &#39;root&#39;</code> , 接著在其他元件裡面這樣寫即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Component, OnInit&#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">@Component(&#123;</span><br><span class="line">	selector: &#39;app-root&#39;,</span><br><span class="line">	templateUrl: &#39;.&#x2F;app.component.html&#39;,</span><br><span class="line">	styleUrls: [&#39;.&#x2F;app.component.css&#39;],</span><br><span class="line">	providers:[</span><br><span class="line">		LoadingService</span><br><span class="line">	]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppComponent implements  OnInit &#123;</span><br><span class="line">	constructor() &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Loading"><a href="#Loading" class="headerlink" title="Loading"></a>Loading</h3><p>看課程學的 loading , 筆記下</p>
<p><code>loading.service.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import &#123; BehaviorSubject, Observable, of, Subject &#125; from &#39;rxjs&#39;;</span><br><span class="line">import &#123; Injectable &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; concatMap, tap, finalize &#125; from &#39;rxjs&#x2F;operators&#39;;</span><br><span class="line"></span><br><span class="line">@Injectable()</span><br><span class="line">export class LoadingService &#123;</span><br><span class="line"></span><br><span class="line">	private loadingSubject &#x3D; new BehaviorSubject&lt;boolean&gt;(false)</span><br><span class="line">	loading$ : Observable&lt;boolean&gt; &#x3D; this.loadingSubject.asObservable()</span><br><span class="line"></span><br><span class="line">	showLoaderUntilCompleted&lt;T&gt;(obs$: Observable&lt;T&gt;) : Observable&lt;T&gt;&#123;</span><br><span class="line">	return of(null)</span><br><span class="line">		.pipe(</span><br><span class="line">			tap(()&#x3D;&gt; this.loadingOn()),</span><br><span class="line">			concatMap(()&#x3D;&gt; obs$),</span><br><span class="line">			finalize(()&#x3D;&gt;this.loadingOff())</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	loadingOn()&#123;</span><br><span class="line">		this.loadingSubject.next(true)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	loadingOff()&#123;</span><br><span class="line">		this.loadingSubject.next(false)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>loading.component.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, OnInit &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123;Observable&#125; from &#39;rxjs&#39;;</span><br><span class="line">import &#123; LoadingService &#125; from &#39;.&#x2F;loading.service&#39;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">	selector: &#39;loading&#39;,</span><br><span class="line">	templateUrl: &#39;.&#x2F;loading.component.html&#39;,</span><br><span class="line">	styleUrls: [&#39;.&#x2F;loading.component.css&#39;]</span><br><span class="line">&#125;)</span><br><span class="line">export class LoadingComponent implements OnInit &#123;</span><br><span class="line">	constructor(public loadingService: LoadingService) &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	ngOnInit() &#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>他這個有安裝 angular material , 應該可以自己換成喜歡的 css 就好</p>
<p><code>loading.component.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;spinner-container&quot; *ngIf&#x3D;&quot;loadingService.loading$ | async&quot;&gt;</span><br><span class="line">	&lt;mat-spinner&gt;</span><br><span class="line">	&lt;&#x2F;mat-spinner&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>


<p>css 的部分他用常見的迷片蓋板寫法 , flex 固定在中間</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.spinner-container &#123;</span><br><span class="line">	position: fixed;</span><br><span class="line">	height: 100%;</span><br><span class="line">	width: 100%;</span><br><span class="line">	display: flex;</span><br><span class="line">	justify-content: center;</span><br><span class="line">	align-items: center;</span><br><span class="line">	top: 0;</span><br><span class="line">	left: 0;</span><br><span class="line">	background:rgba(0, 0, 0, 0.32);</span><br><span class="line">	z-index: 2000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="引入外部資源-css-or-js"><a href="#引入外部資源-css-or-js" class="headerlink" title="引入外部資源 css or js"></a>引入外部資源 css or js</h3><p>這個最常見就是遇到 jq 仔在 spa 裡面繼續給你搞 jquery XD , 曾經最流行的東西現在被唾棄成這樣<br>找到 <code>angular.json</code> 然後修改 script 裡面要引入的函示庫即可 , 大概類似這樣 , 或丟進去 assets 裡<br>同理 bootstrap 或其他阿薩布魯的樣式也是加入至 styles 裡面即可<br>或是想模擬假 api 可以先準備個 json 檔案 , 丟在 assets 裡面<br>萬一這個 <code>angular.js</code> 有異動的話需要從新 <code>npm start</code> 才會 reload</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&quot;assets&quot;: [</span><br><span class="line">	&quot;src&#x2F;api&quot;,</span><br><span class="line">	&quot;src&#x2F;assets&quot;</span><br><span class="line">],</span><br><span class="line">&quot;scripts&quot;: [</span><br><span class="line">	&quot;src&#x2F;jquery-3.6.1.js&quot;</span><br><span class="line">],</span><br><span class="line">&quot;styles&quot; : [</span><br><span class="line">	&quot;node_module&#x2F;bootstrap&#x2F;dist&#x2F;css&#x2F;bootstrap.min.css&quot;,</span><br><span class="line">	&quot;&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<h3 id="Extension"><a href="#Extension" class="headerlink" title="Extension"></a>Extension</h3><p>建議不要裝那種整包的 , 有的綁一堆結果自己沒在用反而造成困擾 , 有的套件明明都沒更新還綁進去 ..</p>
<h4 id="vscode-1"><a href="#vscode-1" class="headerlink" title="vscode"></a>vscode</h4><p><a href="https://marketplace.visualstudio.com/items?itemName=Angular.ng-template" target="_blank" rel="noopener">Angular Language Service</a> 讓 vscode 讀懂 angular 相關語法</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=infinity1207.angular2-switcher" target="_blank" rel="noopener">angular2-switcher</a><br>用 <code>alt + o</code> 快速切換 template &amp; component </p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener">eslint</a> 幫你驗證目前語法</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=johnpapa.Angular2" target="_blank" rel="noopener">Angular Snippets Version 13</a> 加入一堆 <code>n-xxx</code> 的 tag or nippet</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=cyrilletuzi.angular-schematics" target="_blank" rel="noopener">Angular Schematics</a> 讓你不用敲命令建立 <code>component</code> <code>service</code></p>
<p>以下這兩個都跟路徑有關 , 沒裝的話有時候滿難做事<br><a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense" target="_blank" rel="noopener">Path Intellisense</a><br><a href="https://marketplace.visualstudio.com/items?itemName=ionutvmi.path-autocomplete" target="_blank" rel="noopener">Path Autocomplete</a></p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=steoates.autoimport" target="_blank" rel="noopener">Auto Import</a> 有這個才有辦法自動 import 多少省點力</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=anteprimorac.html-end-tag-labels" target="_blank" rel="noopener">HTML End Tag Labels</a> 這個寫 html 滿有用的 , 可以在結尾看到 class 名稱方便分辨</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=ipatalas.vscode-postfix-ts" target="_blank" rel="noopener">TS/JS postfix completion</a> 有 postfix 就加減用下多省個一秒</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=nrwl.angular-console" target="_blank" rel="noopener">NX Console</a><br>這個後來才發現 , 比 <code>Angular Schematics</code> 功能更強但是更複雜 , 反正就是把 angular-cli 變成有 GUI 就對了 , 不過有些要自己手寫 , 視情況用</p>
<p>假設建立一個 LaSai service 要自己去指定路徑跟參數<br><code>name *</code> =&gt; <code>LaSai</code><br><code>project</code> =&gt; <code>helloworld</code><br><code>path</code> =&gt; <code>./src/app/la-sai</code></p>
<p>最後會生出這樣的指令 , 好複雜阿 @@!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx nx generate @schematics&#x2F;angular:service FontSize --project&#x3D;helloworld --path&#x3D;.&#x2F;src&#x2F;app&#x2F;la-sai --no-interactive</span><br></pre></td></tr></table></figure>

<h4 id="visual-studio"><a href="#visual-studio" class="headerlink" title="visual studio"></a>visual studio</h4><p><a href="https://marketplace.visualstudio.com/items?itemName=TypeScriptTeam.AngularLanguageService2022" target="_blank" rel="noopener">Angular Language Service 2022</a> 這個 2022/10/15 剛開發出來 XD<br><a href="https://marketplace.visualstudio.com/items?itemName=OAS.05D8FE2B-55EC-4A28-8865-C2570F30A1C9" target="_blank" rel="noopener">Angular Html TS Switcher VS 2022</a> 不過這個快捷是 <code>ctrl + 2</code> 所以要自己 remap 為 <code>alt + o</code></p>
<p>其他就乖打指令或是切回 vscode 去開發這個部分 , 後來遇到因為有兩個 module 所以他認不得要自動 import 進去哪個的問題要改這樣用 <code>--skip-import=true</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng g component map --skip-import&#x3D;true</span><br></pre></td></tr></table></figure>


<h4 id="chrome"><a href="#chrome" class="headerlink" title="chrome"></a>chrome</h4><p><a href="https://chrome.google.com/webstore/detail/angular-devtools/ienfalfjdbdpebioblfackkekamfmbnh" target="_blank" rel="noopener">Angular DevTools</a> 這個算是 Chrome 的 extension , 安裝好以後按下 F12 會出現一個 Angular 頁籤 , 可以看到元件內的變數方便 debug</p>
<h3 id="關閉-strict-mode"><a href="#關閉-strict-mode" class="headerlink" title="關閉 strict mode"></a>關閉 strict mode</h3><p>找到 <code>tsconfig.json</code> 將設定有 <code>strict</code> 改成 false 吧 , 這個不改的話開發起來應該會被搞死 XD<br>其他好像還有些地方有 , 暫時沒詳細研究</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&quot;compilerOptions&quot;: &#123;</span><br><span class="line">  &quot;baseUrl&quot;: &quot;.&#x2F;&quot;,</span><br><span class="line">  &quot;outDir&quot;: &quot;.&#x2F;dist&#x2F;out-tsc&quot;,</span><br><span class="line">  &quot;forceConsistentCasingInFileNames&quot;: true,</span><br><span class="line">  &quot;strict&quot;: false,</span><br><span class="line">  &quot;noImplicitOverride&quot;: true,</span><br><span class="line">  &quot;noPropertyAccessFromIndexSignature&quot;: true,</span><br><span class="line">  &quot;noImplicitReturns&quot;: true,</span><br><span class="line">  &quot;noFallthroughCasesInSwitch&quot;: true,</span><br><span class="line">  &quot;sourceMap&quot;: true,</span><br><span class="line">  &quot;declaration&quot;: false,</span><br><span class="line">  &quot;downlevelIteration&quot;: true,</span><br><span class="line">  &quot;experimentalDecorators&quot;: true,</span><br><span class="line">  &quot;moduleResolution&quot;: &quot;node&quot;,</span><br><span class="line">  &quot;importHelpers&quot;: true,</span><br><span class="line">  &quot;target&quot;: &quot;es2020&quot;,</span><br><span class="line">  &quot;module&quot;: &quot;es2020&quot;,</span><br><span class="line">  &quot;lib&quot;: [</span><br><span class="line">    &quot;es2020&quot;,</span><br><span class="line">    &quot;dom&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;angularCompilerOptions&quot;: &#123;</span><br><span class="line">  &quot;enableI18nLegacyMessageIdFormat&quot;: false,</span><br><span class="line">  &quot;strictInjectionParameters&quot;: true,</span><br><span class="line">  &quot;strictInputAccessModifiers&quot;: true,</span><br><span class="line">  &quot;strictTemplates&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h3 id="editorconfig"><a href="#editorconfig" class="headerlink" title="editorconfig"></a>editorconfig</h3><p>因為長期寫 .net 的關係 , 看到兩個空白就賭爛 , 所以就靠這樣解決 XD<br>效果可以看<a href="https://www.youtube.com/watch?v=_fcQDS1iTPw" target="_blank" rel="noopener">這個影片</a><br>首先安裝這個一臉猥瑣的老鼠 <a href="https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig" target="_blank" rel="noopener">EditorConfig extension</a><br>接著加入或修改這個檔案 , 從此以後就跟討厭的兩個空白說掰掰 , 更噁爛的應該還有 <code>prettier</code> , 不過環境太亂了就暫時不搞<br><code>.editorconfig</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Editor configuration, see https:&#x2F;&#x2F;editorconfig.org</span><br><span class="line">root &#x3D; true</span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset &#x3D; utf-8</span><br><span class="line">indent_style &#x3D; tab</span><br><span class="line">indent_size &#x3D; 4</span><br><span class="line">insert_final_newline &#x3D; true</span><br><span class="line">trim_trailing_whitespace &#x3D; true</span><br><span class="line"></span><br><span class="line">[*.ts]</span><br><span class="line">quote_type &#x3D; single</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">max_line_length &#x3D; off</span><br><span class="line">trim_trailing_whitespace &#x3D; false</span><br></pre></td></tr></table></figure>

<h3 id="常用會忘了-import-的-module"><a href="#常用會忘了-import-的-module" class="headerlink" title="常用會忘了 import 的 module"></a>常用會忘了 import 的 module</h3><p><code>FormsModule</code> , <code>HttpClientModule</code> 這兩老常常用 , 但是常常忘記<br><code>app.module.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import &#123; NgModule &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; BrowserModule &#125; from &#39;@angular&#x2F;platform-browser&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; AppRoutingModule &#125; from &#39;.&#x2F;app-routing.module&#39;;</span><br><span class="line">import &#123; AppComponent &#125; from &#39;.&#x2F;app.component&#39;;</span><br><span class="line">import &#123; FooterComponent &#125; from &#39;.&#x2F;footer&#x2F;footer.component&#39;;</span><br><span class="line">import &#123; HeaderComponent &#125; from &#39;.&#x2F;header&#x2F;header.component&#39;;</span><br><span class="line">import &#123; TagsComponent &#125; from &#39;.&#x2F;tags&#x2F;tags.component&#39;;</span><br><span class="line">import &#123; ArticlesComponent &#125; from &#39;.&#x2F;articles&#x2F;articles.component&#39;;</span><br><span class="line">import &#123; FormsModule &#125; from &#39;@angular&#x2F;forms&#39;;</span><br><span class="line">import &#123; HttpClientModule &#125; from &#39;@angular&#x2F;common&#x2F;http&#39;;</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">	declarations: [</span><br><span class="line">		AppComponent,</span><br><span class="line">		FooterComponent,</span><br><span class="line">		HeaderComponent,</span><br><span class="line">		TagsComponent,</span><br><span class="line">		ArticlesComponent</span><br><span class="line">	],</span><br><span class="line">	imports: [</span><br><span class="line">		BrowserModule,</span><br><span class="line">		AppRoutingModule,</span><br><span class="line">		FormsModule,</span><br><span class="line">		HttpClientModule</span><br><span class="line">	],</span><br><span class="line">	providers: [],</span><br><span class="line">	bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="檔名-amp-資料夾結構"><a href="#檔名-amp-資料夾結構" class="headerlink" title="檔名 &amp; 資料夾結構"></a>檔名 &amp; 資料夾結構</h3><p>檔名習慣一律使用 <code>小寫</code> 作為檔名 , 資料夾結構大概類似這樣 , 跟程式有關的丟在 <code>app</code> 底下就對了 , 像是 <code>model</code> , <code>service</code> 這類<br>範例: 假設建立一個 <code>fontSize</code> 的 component 會產生出這樣的檔案 <code>font-size.component.ts</code> 然後類別名稱會長這樣 <code>FontSizeComponent</code></p>
<p>順便科普在 windows 用 <code>tree /F</code> 可以產出類似如下資料夾結構 , 但是沒辦法指定階層 , windows 可以考慮安裝這個 <a href="https://www.npmjs.com/package/tree-cli" target="_blank" rel="noopener">tree-cli</a> 用起來就跟 linux 類似</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g tree-cli</span><br><span class="line"></span><br><span class="line">treee -l 1</span><br><span class="line">treee -l 2</span><br></pre></td></tr></table></figure>

<p>linux 底下可以直接用 <code>tree -L 3</code> 指定階層<br>資料夾結構如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">├── app</span><br><span class="line">│   ├── app-routing.module.ts</span><br><span class="line">│   ├── app.component.css</span><br><span class="line">│   ├── app.component.html</span><br><span class="line">│   ├── app.component.spec.ts</span><br><span class="line">│   ├── app.component.ts</span><br><span class="line">│   ├── app.module.ts</span><br><span class="line">│   └── model</span><br><span class="line">├── assets</span><br><span class="line">├── environments</span><br><span class="line">│   ├── environment.prod.ts</span><br><span class="line">│   └── environment.ts</span><br><span class="line">├── favicon.ico</span><br><span class="line">├── index.html</span><br><span class="line">├── main.ts</span><br><span class="line">├── polyfills.ts</span><br><span class="line">├── styles.css</span><br><span class="line">└── test.ts</span><br></pre></td></tr></table></figure>

<h3 id="Binding"><a href="#Binding" class="headerlink" title="Binding"></a>Binding</h3><h4 id="Attribute-vs-Property"><a href="#Attribute-vs-Property" class="headerlink" title="Attribute vs Property"></a>Attribute vs Property</h4><p>因為這兩個都翻譯成屬性 , 英文真噁 , 所以特別筆記下在 angular 裡面的定義 , 防止又忘了<br><code>attribute</code> =&gt; html 標籤裡面寫的咚咚 , 如果你在 chrome 對這個元素點右鍵 , 他會有個選項叫做 <code>Edit Attribute</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;qq&quot; class&#x3D;&quot;&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p><code>property</code> =&gt; dom tree 生出來的咚咚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qq &#x3D; document.getElementById(&#39;qq&#39;)</span><br><span class="line">qq.classList</span><br></pre></td></tr></table></figure>
<p>太難解釋 XD <a href="https://teagan-hsu.coderbridge.io/2020/12/28/javascript-dom-attribute-property/" target="_blank" rel="noopener">詳細可以看這篇</a></p>
<h4 id="Attrbitue-binding"><a href="#Attrbitue-binding" class="headerlink" title="Attrbitue binding"></a>Attrbitue binding</h4><p>以前 jquery 常常寫這樣 <code>data-xxx=&quot;ooo&quot;</code> 在 angular 要寫這樣 <code>[attr.data-xxx]=&quot;ooo&quot;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;lasai&quot; [attr.xx]&#x3D;&quot;ooo&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;lasai&quot; [attr.data-xx]&#x3D;&quot;ooo&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>這是一個工作上遇到的實例 , 套用 bootstrap 的 <code>list-group-item</code> , 底下有子選項 , 希望把子選項的數量也列出來 , 但是不想多加 <code>span</code><br>所以就想到可以靠 css 的 <code>content</code> 搭配 <code>attr</code> 挖洞把數值傳進去</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;list-group overflow-auto  mt-2&quot;&gt;</span><br><span class="line">&lt;button type&#x3D;&quot;button&quot;</span><br><span class="line">class&#x3D;&quot;list-group-item list-group-item-action&quot;</span><br><span class="line">[class.child-len]&#x3D;&quot;true&quot;</span><br><span class="line">[attr.data-child-len]&#x3D;&quot;item?.childItems?.length&quot;</span><br><span class="line">*ngFor&#x3D;&quot;let item of items&quot;&gt;</span><br><span class="line">&#123;&#123;item.name&#125;&#125;</span><br><span class="line">&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>撰寫 css 要注意需要先開啟父層空間為 <code>relative</code> , 這樣偽元素定位才會正確<br>這裡翻書看到日本人推薦一個有趣的 <a href="https://9elements.github.io/fancy-border-radius/" target="_blank" rel="noopener">border-radius 工具</a> 方便拉出好看的點綴效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.child-len &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.child-len::before &#123;</span><br><span class="line">  content: attr(data-child-len);</span><br><span class="line">  padding: 5px;</span><br><span class="line">  left: 0px;</span><br><span class="line">  width: 30px;</span><br><span class="line">  height: 30px;</span><br><span class="line">  line-height: 22px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  position: absolute;</span><br><span class="line">  border-radius: 100% 0% 100% 0% &#x2F; 100% 37% 63% 0%;</span><br><span class="line">  background-color: rgba(138, 201, 57, 0.75);</span><br><span class="line">  color: white;</span><br><span class="line">  z-index: -1;</span><br><span class="line">  text-indent: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Property-binding"><a href="#Property-binding" class="headerlink" title="Property binding"></a>Property binding</h4><p>上面說到 property 是跟 dom 相關 , 最好的例子就是 <code>innerHtml</code> , 這樣就可以在裡面吃到 html</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;lasai&quot; [innerHtml]&#x3D;&quot;&lt;p&gt;helloworld&lt;&#x2F;p&gt;&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Event-binding"><a href="#Event-binding" class="headerlink" title="Event binding"></a>Event binding</h4><p>比較特別的地方就是要用 <code>$event</code> 當參數傳進去讓 function 接收 , 另外不確定是傳啥的話可以先在 function 接收的地方寫上 <code>any</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;button (click)&#x3D;&quot;helloworld($event)&quot;&gt;&lt;&#x2F;button&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;helloworld(event: any)&#123;</span><br><span class="line">&#x2F;&#x2F;	console.log(event)</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line"></span><br><span class="line">helloworld(event: MouseEvent)&#123;</span><br><span class="line">	console.log(event)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="雙向-香蕉-binding"><a href="#雙向-香蕉-binding" class="headerlink" title="雙向/香蕉 binding"></a>雙向/香蕉 binding</h4><p>angular 的雙向是兩個單向組合而成 , 要記這個噁爛的語法就要參考老外這句英文 <code>banana in the box [()]</code> 其實還滿像的啦 XD<br>跟那個啥 perl 的太空船符號有得拚 , 好像長這樣 <code>&lt;-&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div [(ngModel)]&#x3D;&quot;banana&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="ngClass-binding"><a href="#ngClass-binding" class="headerlink" title="ngClass binding"></a>ngClass binding</h4><p>注意要加上中括號 <code>[ngClass]</code> , 新手剛寫很容易忘記 , 還有其他寫法就懶得筆記了 XD<br>另外注意切換 class 不要白目加上 <code>.</code> , 例如 <code>.bg-text</code> 應該要寫 <code>bg-text</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 正確寫法 --&gt;</span><br><span class="line">&lt;div [ngClass]&#x3D;&quot;&#39;text-white m-2 p-2 &#39; + getClasses()&quot;&gt;</span><br><span class="line">	Hello World</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 錯誤寫法 --&gt;</span><br><span class="line">&lt;div ngClass&#x3D;&quot;&#39;text-white m-2 p-2 &#39; + getClasses()&quot;&gt;</span><br><span class="line">	Hello World</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 其他寫法 --&gt;</span><br><span class="line">&lt;div [class.red]&#x3D;&quot;items.length &gt; 10&quot;&gt;</span><br><span class="line">	Hello World</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>



<h4 id="ngStyle-binding"><a href="#ngStyle-binding" class="headerlink" title="ngStyle binding"></a>ngStyle binding</h4><p>這個我的記憶法就是裡面放 json , 然後 json 屬性都使用單引號即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div [ngStyle]&#x3D;&quot;&#123; &#39;font-size&#39; : &#39;200px&#39;&#125;&quot;&gt;</span><br><span class="line">	龜</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>另外 style 還可以寫成這樣 <code>[style.fontSize]=&quot;&#39;20px&#39;&quot;</code> 要串多個的話可以像下面這樣寫 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div [(colorPicker)]&#x3D;&quot;headColor&quot;</span><br><span class="line">	[style.background]&#x3D;&quot;headColor&quot;</span><br><span class="line">	[style.width]&#x3D;&quot;&#39;100px&#39;&quot;</span><br><span class="line">	[style.height]&#x3D;&quot;&#39;100px&#39;&quot;</span><br><span class="line">	[style.borderRadius]&#x3D;&quot;&#39;50%&#39;&quot;</span><br><span class="line">	[style.fontSize]&#x3D;&quot;&#39;20px&#39;&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="字串插值-binding-string-interpolation-binding"><a href="#字串插值-binding-string-interpolation-binding" class="headerlink" title="字串插值 binding (string interpolation binding)"></a>字串插值 binding (string interpolation binding)</h4><p>這應該最簡單啦 , 用兩個花括號包著即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123;&#123;helloworld&#125;&#125;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Lab-實作一隻烏龜"><a href="#Lab-實作一隻烏龜" class="headerlink" title="Lab 實作一隻烏龜"></a>Lab 實作一隻烏龜</h4><p>因為大致上玩過 binding 了 , 總要練習看看 , 結果可以看 <a href="https://stackblitz.com/edit/angular-electronic-turtle" target="_blank" rel="noopener">這裡</a><br>這個 Lab 要改變烏龜的顏色 , 還有龜殼上面的文字</p>
<p>下載 <a href="https://www.npmjs.com/package/ngx-color-picker" target="_blank" rel="noopener">ngx-color-picker</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ngx-color-picker --save</span><br></pre></td></tr></table></figure>

<p>引用 <code>ngx-color-picker</code></p>
<p><code>app.module.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ColorPickerModule &#125; from &#39;ngx-color-picker&#39;;</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  ...</span><br><span class="line">  imports: [</span><br><span class="line">    ...</span><br><span class="line">    ColorPickerModule</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>這裡要設定 <code>colorPicker</code>  讓他用雙向 binding</p>
<p><code>turtle.component.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;turtle&quot;&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;head&quot;</span><br><span class="line">		[(colorPicker)]&#x3D;&quot;headColor&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;foot-top-left&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;foot-top-right&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;shell&quot;&gt;</span><br><span class="line">		&lt;div class&#x3D;&quot;text&quot;</span><br><span class="line">			style&#x3D;&quot;z-index:999999&quot;&gt;</span><br><span class="line">			&lt;a href&#x3D;&quot;https:&#x2F;&#x2F;tortoisegit.org&#x2F;&quot;</span><br><span class="line">				target&#x3D;&quot;_blank&quot;&gt;&#123;&#123; text &#125;&#125;&lt;&#x2F;a&gt;</span><br><span class="line">		&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;foot-bottom-left&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;foot-bottom-right&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p><code>turtle.component.css</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">	margin: 0;</span><br><span class="line">	padding: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body &#123;</span><br><span class="line">	display: flex;</span><br><span class="line">	align-items: center;</span><br><span class="line">	justify-content: center;</span><br><span class="line">	height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.turtle &#123;</span><br><span class="line">	&#x2F;* width: 400px;</span><br><span class="line">	height: 400px;</span><br><span class="line">	position: relative; *&#x2F;</span><br><span class="line">	&#x2F;* border: 1px solid; *&#x2F;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">:host&#123;</span><br><span class="line">	--head-color: red</span><br><span class="line">&#125;</span><br><span class="line">.head &#123;</span><br><span class="line">	width: 50px;</span><br><span class="line">	height: 60px;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	border-radius: 50%;</span><br><span class="line">	position: absolute;</span><br><span class="line">	top: calc(50% - 30px - 110px);</span><br><span class="line">	left: calc(50% - 25px);</span><br><span class="line">	background-color: var(--head-color);</span><br><span class="line">	transition: 1s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.head:hover &#123;</span><br><span class="line">	background-color: pink;</span><br><span class="line">	box-shadow: 0 0 50px pink;</span><br><span class="line">	transition: 1s;</span><br><span class="line">	transform: scale(1.2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.head::after &#123;</span><br><span class="line">	content: &#39;&#39;;</span><br><span class="line">	position: absolute;</span><br><span class="line">	width: 5px;</span><br><span class="line">	height: 5px;</span><br><span class="line">	top: 5px;</span><br><span class="line">	right: 5px;</span><br><span class="line">	border-radius: 50%;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	background-color: #000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.head::before &#123;</span><br><span class="line">	content: &#39;&#39;;</span><br><span class="line">	position: absolute;</span><br><span class="line">	width: 5px;</span><br><span class="line">	height: 5px;</span><br><span class="line">	top: 5px;</span><br><span class="line">	left: 5px;</span><br><span class="line">	border-radius: 50%;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	background-color: #000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.shell &#123;</span><br><span class="line">	&#x2F;* border: 5px solid; *&#x2F;</span><br><span class="line">	position: absolute;</span><br><span class="line">	margin: auto;</span><br><span class="line">	top: 0;</span><br><span class="line">	left: 0;</span><br><span class="line">	right: 0;</span><br><span class="line">	bottom: 0;</span><br><span class="line"></span><br><span class="line">	border-radius: 50%;</span><br><span class="line"></span><br><span class="line">	width: 200px;</span><br><span class="line">	height: 220px;</span><br><span class="line">	z-index: 10;</span><br><span class="line">	background-color: rgb(16, 157, 95);</span><br><span class="line">	&#x2F;* background-color: rgb(0, 107, 0); *&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	display: flex;</span><br><span class="line">	align-items: center;</span><br><span class="line">	justify-content: center;</span><br><span class="line">	box-shadow: 0 0 20px #0A0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.shell::after &#123;</span><br><span class="line">	position: absolute;</span><br><span class="line">	margin: auto;</span><br><span class="line">	top: 0;</span><br><span class="line">	left: 0;</span><br><span class="line">	right: 0;</span><br><span class="line">	bottom: 0;</span><br><span class="line">	border-radius: 41%;</span><br><span class="line">	width: 195px;</span><br><span class="line">	height: 210px;</span><br><span class="line">	content: &#39;&#39;;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	z-index: 11;</span><br><span class="line">	animation: move 5s linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes move &#123;</span><br><span class="line">	to &#123;</span><br><span class="line">		transform: rotate(-1turn);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes move2 &#123;</span><br><span class="line">	to &#123;</span><br><span class="line">		transform: rotate(90deg);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.shell::before &#123;</span><br><span class="line">	position: absolute;</span><br><span class="line">	margin: auto;</span><br><span class="line">	top: 0;</span><br><span class="line">	left: 0;</span><br><span class="line">	right: 0;</span><br><span class="line">	bottom: 0;</span><br><span class="line">	border-radius: 45%;</span><br><span class="line">	width: 200px;</span><br><span class="line">	height: 200px;</span><br><span class="line">	content: &#39;&#39;;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	z-index: 11;</span><br><span class="line">	animation: move2 1s linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.text &#123;</span><br><span class="line">	margin: auto;</span><br><span class="line">	font-family: &#39;標楷體&#39;;</span><br><span class="line">	color: #fff;</span><br><span class="line">	font-size: 72pt;</span><br><span class="line">	writing-mode: vertical-lr;</span><br><span class="line">	text-align: center;</span><br><span class="line">	vertical-align: middle;</span><br><span class="line">	text-shadow:</span><br><span class="line">		0 0 15px #fff,</span><br><span class="line">		0 0 35px #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.text a &#123;</span><br><span class="line">	text-decoration: none;</span><br><span class="line">	color: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.foot-top-left &#123;</span><br><span class="line">	width: 30px;</span><br><span class="line">	height: 50px;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	border-radius: 50%;</span><br><span class="line">	position: absolute;</span><br><span class="line">	top: calc(50% - 30px - 80px);</span><br><span class="line">	left: calc(50% - 30px - 60px);</span><br><span class="line">	transform: rotate(-20deg);</span><br><span class="line"></span><br><span class="line">	background-color: #d4ffe2;</span><br><span class="line">	animation: move-foot-top-left 1s alternate infinite;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes move-foot-top-left &#123;</span><br><span class="line">	to &#123;</span><br><span class="line">		transform: rotate(-33deg);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.foot-top-right &#123;</span><br><span class="line">	width: 30px;</span><br><span class="line">	height: 50px;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	border-radius: 50%;</span><br><span class="line">	position: absolute;</span><br><span class="line">	top: calc(50% - 30px - 80px);</span><br><span class="line">	right: calc(50% - 30px - 60px);</span><br><span class="line">	transform: rotate(20deg);</span><br><span class="line"></span><br><span class="line">	background-color: #d4ffe2;</span><br><span class="line">	animation: move-foot-top-right 1s alternate infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes move-foot-top-right &#123;</span><br><span class="line">	to &#123;</span><br><span class="line">		transform: rotate(45deg);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.foot-bottom-left &#123;</span><br><span class="line">	width: 30px;</span><br><span class="line">	height: 50px;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	border-radius: 50%;</span><br><span class="line">	position: absolute;</span><br><span class="line">	bottom: calc(50% - 30px - 80px);</span><br><span class="line">	left: calc(50% - 30px - 60px);</span><br><span class="line">	transform: rotate(20deg);</span><br><span class="line">	background-color: #d4ffe2;</span><br><span class="line"></span><br><span class="line">	animation: move-foot-bottom-left 1s alternate infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes move-foot-bottom-left &#123;</span><br><span class="line">	to &#123;</span><br><span class="line">		transform: rotate(43deg);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.foot-bottom-right &#123;</span><br><span class="line">	width: 30px;</span><br><span class="line">	height: 50px;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	border-radius: 50%;</span><br><span class="line">	position: absolute;</span><br><span class="line">	bottom: calc(50% - 30px - 80px);</span><br><span class="line">	right: calc(50% - 30px - 60px);</span><br><span class="line">	transform: rotate(-20deg);</span><br><span class="line">	background-color: #d4ffe2;</span><br><span class="line">	animation: move-foot-bottom-right 1s alternate infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes move-foot-bottom-right &#123;</span><br><span class="line">	to &#123;</span><br><span class="line">		transform: rotate(-33deg);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>特別注意到關鍵這個片段在 <code>:host</code> 加上 css 變數 <code>--head-color</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">:host&#123;</span><br><span class="line">	--head-color: red</span><br><span class="line">&#125;</span><br><span class="line">.head &#123;</span><br><span class="line">	width: 50px;</span><br><span class="line">	height: 60px;</span><br><span class="line">	border: 1px solid;</span><br><span class="line">	border-radius: 50%;</span><br><span class="line">	position: absolute;</span><br><span class="line">	top: calc(50% - 30px - 110px);</span><br><span class="line">	left: calc(50% - 25px);</span><br><span class="line">	background-color: var(--head-color);</span><br><span class="line">	transition: 1s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最後設定 <code>turtle.component.ts</code><br>關鍵在使用 <code>HostBinding</code> 可以參考<a href="https://decodedscript.com/ways-of-binding-css-variables-in-angular/" target="_blank" rel="noopener">這篇</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, EventEmitter, HostBinding, Input, OnInit, Output &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">	selector: &#39;app-turtle&#39;,</span><br><span class="line">	templateUrl: &#39;.&#x2F;turtle.component.html&#39;,</span><br><span class="line">	styleUrls: [&#39;.&#x2F;turtle.component.css&#39;]</span><br><span class="line">&#125;)</span><br><span class="line">export class TurtleComponent implements OnInit &#123;</span><br><span class="line"></span><br><span class="line">	constructor() &#123; &#125;</span><br><span class="line"></span><br><span class="line">	ngOnInit(): void &#123;</span><br><span class="line">		&#x2F;&#x2F; this.headColor &#x3D; &#39;red&#39;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private _headColor: string &#x3D; &#39;&#39;;</span><br><span class="line"></span><br><span class="line">	@HostBinding(&quot;style.--head-color&quot;)</span><br><span class="line">	@Input()</span><br><span class="line">	get headColor() : string&#123;</span><br><span class="line">		return this._headColor</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	set headColor(headColor : string)&#123;</span><br><span class="line">		this._headColor &#x3D; headColor</span><br><span class="line">		this.headColorChange.emit(this._headColor)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	@Output()</span><br><span class="line">	headColorChange &#x3D; new EventEmitter&lt;string&gt;()</span><br><span class="line"></span><br><span class="line">	@Input()</span><br><span class="line">	text : string &#x3D; &#39;&#39;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>app.component.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">	selector: &#39;app-root&#39;,</span><br><span class="line">	templateUrl: &#39;.&#x2F;app.component.html&#39;,</span><br><span class="line">	styleUrls: [&#39;.&#x2F;app.component.css&#39;]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppComponent &#123;</span><br><span class="line">	headColor &#x3D; &#39;#d4ffe2&#39;	</span><br><span class="line">	text &#x3D; &#39;龜龜&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>app.component.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;直接點烏龜頭修改顏色&lt;&#x2F;h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;label&gt;輸入其他字修改龜殼文字&lt;&#x2F;label&gt;</span><br><span class="line">&lt;input type&#x3D;&quot;text&quot;</span><br><span class="line">	[(ngModel)]&#x3D;&quot;text&quot;</span><br><span class="line">	[style.margin]&#x3D;&quot;&#39;10px&#39;&quot;</span><br><span class="line">	maxlength&#x3D;&quot;2&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;app-turtle [(headColor)]&#x3D;&quot;headColor&quot; [text]&#x3D;&quot;text&quot;&gt;&lt;&#x2F;app-turtle&gt;</span><br></pre></td></tr></table></figure>


<h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><p>這類用法跟以前在 angularjs 差不多 , 就是改成前面有 <code>*ng</code> , 不過以前怎麼寫的我突然也忘了 ..</p>
<h4 id="ngSwitch"><a href="#ngSwitch" class="headerlink" title="ngSwitch"></a>ngSwitch</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;bg-info p-2 mt-1&quot; [ngSwitch]&#x3D;&quot;getProductCount()&quot;&gt;</span><br><span class="line">	&lt;span *ngSwitchCase&#x3D;&quot;2&quot;&gt;There are 2 products&lt;&#x2F;span&gt;</span><br><span class="line">	&lt;span *ngSwitchCase&#x3D;&quot;3&quot;&gt;There are 3 products&lt;&#x2F;span&gt;</span><br><span class="line">	&lt;span *ngSwitchDefault&gt;There are &#123;&#123;getProductCount()&#125;&#125; products&lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>另外這類指令會讓元素直接 <code>消失</code> , 不是隱藏 , 其他像是 <code>*ngIf</code> 等等也會有類似的效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;bg-info p-2 mt-1&quot; ng-reflect-ng-switch&#x3D;&quot;5&quot;&gt;</span><br><span class="line">&lt;!--bindings&#x3D;&#123; &quot;ng-reflect-ng-switch-case&quot;: &quot;2&quot; &#125;--&gt;</span><br><span class="line">&lt;!--bindings&#x3D;&#123; &quot;ng-reflect-ng-switch-case&quot;: &quot;3&quot; &#125;--&gt;</span><br><span class="line">&lt;span&gt;There are 5 products&lt;&#x2F;span&gt;&lt;!--container--&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;!--container--&gt;</span><br></pre></td></tr></table></figure>

<h4 id="ngFor"><a href="#ngFor" class="headerlink" title="ngFor"></a>ngFor</h4><p>for 就很直覺 , 另外還有 <code>first</code> , <code>last</code> , <code>index</code> 這類可以幫助微調</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;table class&#x3D;&quot;table table-sm table-bordered mt-1 text-dark&quot;&gt;</span><br><span class="line">	&lt;tr&gt;</span><br><span class="line">		&lt;th&gt;Name&lt;&#x2F;th&gt;</span><br><span class="line">		&lt;th&gt;Category&lt;&#x2F;th&gt;</span><br><span class="line">		&lt;th&gt;Price&lt;&#x2F;th&gt;</span><br><span class="line">	&lt;&#x2F;tr&gt;</span><br><span class="line">	&lt;tr *ngFor&#x3D;&quot;let item of getProducts();let first &#x3D; first;let i &#x3D; index;let odd &#x3D; odd;&quot;</span><br><span class="line">		[class.bg-primary]&#x3D;&quot;odd&quot; [class.bg-info]&#x3D;&quot;!odd&quot; [class.bg-danger]&#x3D;&quot;first&quot;</span><br><span class="line">	&gt;</span><br><span class="line">		&lt;td&gt;&#123;&#123;i + 1&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">		&lt;td&gt;&#123;&#123;item.name&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">		&lt;td&gt;&#123;&#123;item.category&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">		&lt;td&gt;&#123;&#123;item.price&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">	&lt;&#x2F;tr&gt;</span><br><span class="line">&lt;&#x2F;table&gt;</span><br></pre></td></tr></table></figure>

<h3 id="日期問題"><a href="#日期問題" class="headerlink" title="日期問題"></a>日期問題</h3><p>安裝參考<a href="https://fullstacksoup.blog/2020/06/17/angular-convert-date-to-sql-server-date-format/" target="_blank" rel="noopener">這篇</a><br>今天遇到一個問題用 <code>new Date()</code> , angular 新增時間到 sql server 時 , 差了八小時<br>本來想說在 api 上面做手腳但是 try 了半天 format 都沒辦法一致<br>web api 預設會打出這樣的 format <code>2023-03-28T08:02:18.513</code><br>最後發現應該前端要用 <code>DatePipe</code> 然後這樣寫就可以過了<br>可以參考這個網站有整理很好的<a href="https://www.numenta.com/resources/htm/htm-studio/date-time-formats/" target="_blank" rel="noopener">表格</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;modifyDatetime&quot;: this.datepipe.transform(new Date(), &#39;yyyy-MM-ddTHH:mm:ss.SSS&#39;)!</span><br></pre></td></tr></table></figure>


<h3 id="route"><a href="#route" class="headerlink" title="route"></a>route</h3><p>本來以為用了 angular 還可以混合後端寫 , 沒想到連 route 都前端在控制 , 真是狠 XD<br>這個設定看上去還算是直覺 , <code>**</code> 的部分大概就是直接導向到 <code>/store</code> , 其他就導向自己對應的頁面</p>
<p><code>app.module.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import &#123; CheckoutComponent &#125; from &#39;.&#x2F;store&#x2F;checkout.component&#39;;</span><br><span class="line">import &#123; CartDetailComponent &#125; from &#39;.&#x2F;store&#x2F;cartDetail.component&#39;;</span><br><span class="line">import &#123; StoreComponent &#125; from &#39;.&#x2F;store&#x2F;store.component&#39;;</span><br><span class="line">import &#123; RouterModule &#125; from &#39;@angular&#x2F;router&#39;;</span><br><span class="line">import &#123; NgModule &#125; from &quot;@angular&#x2F;core&quot;;</span><br><span class="line">import &#123; BrowserModule &#125; from &quot;@angular&#x2F;platform-browser&quot;;</span><br><span class="line">import &#123; AppComponent &#125; from &quot;.&#x2F;app.component&quot;;</span><br><span class="line">import &#123; StoreModule &#125; from &quot;.&#x2F;store&#x2F;store.module&quot;;</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">	imports: [BrowserModule, StoreModule,</span><br><span class="line">		RouterModule.forRoot([</span><br><span class="line">			&#123; path: &quot;store&quot;, component: StoreComponent &#125;,</span><br><span class="line">			&#123; path: &quot;cart&quot;, component: CartDetailComponent &#125;,</span><br><span class="line">			&#123; path: &quot;checkout&quot;, component: CheckoutComponent &#125;,</span><br><span class="line">			&#123; path: &quot;**&quot;, redirectTo: &quot;&#x2F;store&quot; &#125;</span><br><span class="line">		])],</span><br><span class="line">	declarations: [AppComponent],</span><br><span class="line">	bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure>

<p><code>app.component.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, NO_ERRORS_SCHEMA &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">	selector: &#39;app&#39;,</span><br><span class="line">	&#x2F;&#x2F; templateUrl : &#39;.&#x2F;app.component.html&#39;,</span><br><span class="line">	&#x2F;&#x2F; template: &#39;&lt;store&gt;&lt;&#x2F;store&gt;&#39;</span><br><span class="line">	template: &#39;&lt;router-outlet&gt;&lt;&#x2F;router-outlet&gt;&#39;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">export class AppComponent &#123;</span><br><span class="line">	title &#x3D; &#39;SportsStore&#39;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我實務上遇到希望 route 父層可以帶個預設編號 , 不然 user 點到父層的話 , 畫面應該是一片空<br><code>app-routing.module.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	path: &#39;user-detail&#39;,</span><br><span class="line">	redirectTo: &#39;user-detail&#x2F;0&#39;,</span><br><span class="line">	pathMatch : &#39;full&#39;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">	path: &#39;user-detail&#39;,</span><br><span class="line">	component: UserDetailComponent,</span><br><span class="line">	data: &#123; breadcrumb: &#39;使用者詳細資訊&#39; &#125;,</span><br><span class="line">	children: [</span><br><span class="line">	&#123;</span><br><span class="line">		path: &#39;:id&#39;,</span><br><span class="line">		component: UserDetailComponent,</span><br><span class="line">		data: &#123; breadcrumb: (data: any) &#x3D;&gt; &#96;$&#123;data.userDetail.name&#125;&#96; &#125;,</span><br><span class="line">		resolve: &#123; userDetail: UserDetailResolverService &#125;,</span><br><span class="line">		canActivate: [AuthGuard]</span><br><span class="line">	&#125;,</span><br><span class="line">],</span><br><span class="line">	canActivate: [AuthGuard]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="net-6-整合"><a href="#net-6-整合" class="headerlink" title=".net 6 整合"></a>.net 6 整合</h3><p>我看他 .net 6 跟 .net core 3 差異滿大的 XD</p>
<p>執行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dotnet new angular -o HealthCheck</span><br><span class="line">cd HealthCheck&#x2F;ClientApp</span><br></pre></td></tr></table></figure>

<p>建立好以後可以看到 <code>ClientApp</code> 裡面放了 Angular 的東西 , 其他跟 .net 蓋出來的差不多<br>另外用這個 template 建立出來的 angular 應該是 12 , 可以參考這篇<a href="https://ithelp.ithome.com.tw/articles/10275115" target="_blank" rel="noopener">升級</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">angular-demo\HealthCheck\ClientApp via  v16.17.1</span><br><span class="line">🌹 ng version</span><br><span class="line">Your global Angular CLI version (14.2.4) is greater than your local version (12.2.2). The local Angular CLI version is used.</span><br><span class="line"></span><br><span class="line">To disable this warning use &quot;ng config -g cli.warnings.versionMismatch false&quot;.</span><br><span class="line"></span><br><span class="line">     _                      _                 ____ _     ___</span><br><span class="line">    &#x2F; \   _ __   __ _ _   _| | __ _ _ __     &#x2F; ___| |   |_ _|</span><br><span class="line">   &#x2F; △ \ | &#39;_ \ &#x2F; _&#96; | | | | |&#x2F; _&#96; | &#39;__|   | |   | |    | |</span><br><span class="line">  &#x2F; ___ \| | | | (_| | |_| | | (_| | |      | |___| |___ | |</span><br><span class="line"> &#x2F;_&#x2F;   \_\_| |_|\__, |\__,_|_|\__,_|_|       \____|_____|___|</span><br><span class="line">                |___&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Angular CLI: 12.2.2</span><br><span class="line">Node: 16.17.1 (Unsupported)</span><br><span class="line">Package Manager: npm 8.19.2</span><br><span class="line">OS: win32 x64</span><br><span class="line"></span><br><span class="line">Angular: 12.2.2</span><br><span class="line">... animations, cli, common, compiler, compiler-cli, core, forms</span><br><span class="line">... platform-browser, platform-browser-dynamic, platform-server</span><br><span class="line">... router</span><br><span class="line"></span><br><span class="line">Package                         Version</span><br><span class="line">---------------------------------------------------------</span><br><span class="line">@angular-devkit&#x2F;architect       0.1202.2</span><br><span class="line">@angular-devkit&#x2F;build-angular   12.2.2</span><br><span class="line">@angular-devkit&#x2F;core            12.2.2</span><br><span class="line">@angular-devkit&#x2F;schematics      12.2.2</span><br><span class="line">@schematics&#x2F;angular             12.2.2</span><br><span class="line">rxjs                            6.6.7</span><br><span class="line">typescript                      4.2.4</span><br><span class="line"></span><br><span class="line">Warning: The current version of Node (16.17.1) is not supported by Angular.</span><br></pre></td></tr></table></figure>

<p>執行以下命令看目前版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng version</span><br></pre></td></tr></table></figure>

<p>更新時 <code>ng update</code> 萬一噴這個 <code>Package &#39;@angular/cli&#39; is not a dependency.</code> 要先 <code>npm install</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">ng update</span><br><span class="line"></span><br><span class="line">#Package &#39;@angular&#x2F;cli&#39; is not a dependency.</span><br></pre></td></tr></table></figure>

<p>最後可以到這裡 <a href="https://update.angular.io" target="_blank" rel="noopener">官網更新網站</a> 選你要更新的版本 , 貼上指令就可以更新啦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng update @angular&#x2F;core@14 @angular&#x2F;cli@14</span><br></pre></td></tr></table></figure>


<h3 id="SSR"><a href="#SSR" class="headerlink" title="SSR"></a>SSR</h3><p>感覺有夠麻煩 <a href="https://pieterjandeclippel.medium.com/server-side-rendering-in-asp-net-core-angular-2022-version-7aaed8157976" target="_blank" rel="noopener">看這篇</a> , 而且沒官方 Support 就暫時不搞 , 可能其他語言有吧 @@!?</p>
<h3 id="整合-openlayers"><a href="#整合-openlayers" class="headerlink" title="整合 openlayers"></a>整合 openlayers</h3><p>因為以前搞 GIS 用 openlayers 也混了幾年的飯 , 加減玩看看</p>
<p>基本上參考 <a href="https://medium.com/@pro.gramistka/create-interactive-maps-in-angular-12-project-with-openlayers-ba6683d6fe5b" target="_blank" rel="noopener">這篇</a> 就可以做出來了 , 沒啥難度<br>注意到一定要在 <code>tsconfig.json</code> 設定這個 <code>&quot;skipLibCheck&quot;:true</code> 不然會噴一堆鬼東西搞到沒法 debug</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save ol</span><br></pre></td></tr></table></figure>

<p>接著修改 <code>angular.json</code> 引用 openlayers 的樣式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;styles&quot;: [</span><br><span class="line">  &quot;src&#x2F;styles.css&quot;,</span><br><span class="line">  &quot;node_modules&#x2F;ol&#x2F;ol.css&quot;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>建立 map 元件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng generate component map</span><br></pre></td></tr></table></figure>

<p><code>map.component.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;map&quot; class&#x3D;&quot;map&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p><code>map.component.css</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.map &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這裡注意 <code>styleUrls</code> 用 <code>css</code> , 作者用 <code>scss</code><br><code>map.component.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, OnInit &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#39;ol&#x2F;ol.css&#39;;</span><br><span class="line">import Map from &#39;ol&#x2F;Map&#39;;</span><br><span class="line">import View from &#39;ol&#x2F;View&#39;;</span><br><span class="line">import &#123; OSM &#125; from &#39;ol&#x2F;source&#39;;</span><br><span class="line">import TileLayer from &#39;ol&#x2F;layer&#x2F;Tile&#39;;</span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &#39;app-map&#39;,</span><br><span class="line">  templateUrl: &#39;.&#x2F;map.component.html&#39;,</span><br><span class="line">  styleUrls: [&#39;.&#x2F;map.component.css&#39;]</span><br><span class="line">&#125;)</span><br><span class="line">export class MapComponent implements OnInit &#123;</span><br><span class="line">  public map!: Map</span><br><span class="line">  ngOnInit(): void &#123;</span><br><span class="line">    this.map &#x3D; new Map(&#123;</span><br><span class="line">    layers: [</span><br><span class="line">      new TileLayer(&#123;</span><br><span class="line">        source: new OSM(),</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    target: &#39;map&#39;,</span><br><span class="line">    view: new View(&#123; </span><br><span class="line">      center: [0, 0],</span><br><span class="line">      zoom: 2,maxZoom: 18, </span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最後一步設定地圖到主元件上就收工了 <code>app.component.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;app-map&gt;&lt;&#x2F;app-map&gt;</span><br></pre></td></tr></table></figure>

<h3 id="整合-openlayers-2"><a href="#整合-openlayers-2" class="headerlink" title="整合 openlayers 2"></a>整合 openlayers 2</h3><p>嘗試把我以前做的奇怪美食地圖搬移看看 , 記錄下被坑的過程<br>安裝看起來很喇低賽的 <a href="https://www.getpapercss.com/" target="_blank" rel="noopener">papercs</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install papercss</span><br></pre></td></tr></table></figure>

<p><code>angular.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;styles&quot;: [</span><br><span class="line">	&quot;src&#x2F;styles.css&quot;,</span><br><span class="line">	&quot;node_modules&#x2F;ol&#x2F;ol.css&quot;,</span><br><span class="line">	&quot;node_modules&#x2F;papercss&#x2F;dist&#x2F;paper.css&quot;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>中間遇到最大的問題大概就是以前寫了一堆覆蓋 function 的方法 , 這個在 typescript 會吃土<br>在 <code>style</code> 這個方法裡面又有呼叫 <code>scaleAttractionsIcon</code> , <code>scaleAttractionsText</code> 這兩個方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;景點圖層</span><br><span class="line">var attractionsLayer &#x3D; new ol.layer.Vector(&#123;</span><br><span class="line">	renderMode: &#39;image&#39;,</span><br><span class="line">	source: new ol.source.Vector(&#123;</span><br><span class="line">		format: new ol.format.GeoJSON(),</span><br><span class="line">		features: format.readFeatures(attractions)</span><br><span class="line">	&#125;),</span><br><span class="line">	style: function (feature) &#123;</span><br><span class="line">		var style &#x3D; new ol.style.Style(&#123;</span><br><span class="line">			image: new ol.style.Icon((&#123;</span><br><span class="line">				src: setIconSrc(feature),</span><br><span class="line">				scale: scaleAttractionsIcon()</span><br><span class="line">			&#125;)),</span><br><span class="line">			text: new ol.style.Text(&#123;</span><br><span class="line">				text: scaleAttractionsText(feature),</span><br><span class="line">				fill: new ol.style.Fill(&#123;</span><br><span class="line">					color: &#39;#000&#39;</span><br><span class="line">				&#125;),</span><br><span class="line">				stroke: new ol.style.Stroke(&#123;</span><br><span class="line">					color: &#39;#fff&#39;,</span><br><span class="line">					width: 2</span><br><span class="line">				&#125;),</span><br><span class="line">				offsetY: 24</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;);</span><br><span class="line">		return style;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>可是這樣寫在 <code>typescript</code> &amp; <code>angular</code> 裡面 <code>style</code> 會變成 <code>local function</code> , <code>this</code> 這個 <code>scope</code> 會抓不到 , 所以找不到 <code>this.scaleAttractionsIcon</code> , <code>this.scaleAttractionsText</code><br>另外 <code>openlayers</code> 的 <code>Text</code> 類別裡面還有 <code>text</code> , 這個才是真正的文字<br>最後就是以前懶得管閃爍的問題 , 這次順手修下 , 把東西先 cache 到 array 裡面 , 有找到的話就丟出原本樣式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;cache 樣式用防止閃爍</span><br><span class="line">styles: Array&lt;Style&gt; &#x3D; []</span><br><span class="line">	</span><br><span class="line">scaleAttractionsIcon() &#123;</span><br><span class="line">	var zoom &#x3D; this.map.getView().getZoom();</span><br><span class="line"></span><br><span class="line">	if (zoom &#x3D;&#x3D; 9) &#123;</span><br><span class="line">		return 0.4;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if (zoom &lt; 9) &#123;</span><br><span class="line">		return 0.2;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setIconSrc(feature: FeatureLike): string &#123;</span><br><span class="line">	var name &#x3D; feature.getProperties()[&#39;Name&#39;];</span><br><span class="line">	console.log(name);</span><br><span class="line">	return &#96;assets&#x2F;img&#x2F;attractions-min&#x2F;$&#123;name&#125;.jpg&#96;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;景點圖層</span><br><span class="line">attractionsLayer &#x3D; new VectorLayer(&#123;</span><br><span class="line">	source: new VectorSource(&#123;</span><br><span class="line">		format: new GeoJSON(),</span><br><span class="line">		features: new GeoJSON().readFeatures(this.attractions)</span><br><span class="line">		&#x2F;&#x2F;url: &#39;.&#x2F;data&#x2F;attractions.geojson&#39;</span><br><span class="line">	&#125;),</span><br><span class="line"></span><br><span class="line">	style: feature &#x3D;&gt; &#123;</span><br><span class="line">		let style: Style;</span><br><span class="line">		&#x2F;&#x2F; 從 styles 的 cache 裡面找出資料</span><br><span class="line">		let isFind &#x3D; this.styles.some(x &#x3D;&gt; &#123;</span><br><span class="line">			return x.getText().getText() &#x3D;&#x3D;&#x3D; feature.get(&#39;Name&#39;)</span><br><span class="line">		&#125;)</span><br><span class="line">		console.log(&#39;isFind&#39;, isFind)</span><br><span class="line">		if (isFind) &#123;</span><br><span class="line">			&#x2F;&#x2F; 如果 styles 的 cache 裡面有資料的話 , 回傳該名稱的樣式</span><br><span class="line">			style &#x3D; this.styles.filter(x &#x3D;&gt; &#123;</span><br><span class="line">				return x.getText().getText() &#x3D;&#x3D;&#x3D; feature.get(&#39;Name&#39;)</span><br><span class="line">			&#125;)[0]</span><br><span class="line">			return style</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			&#x2F;&#x2F; 如果沒找到的話新增 style 並且 push 到裡面去 , 最後回傳</span><br><span class="line">			style &#x3D; new Style(&#123;</span><br><span class="line">				image: new Icon((&#123;</span><br><span class="line">					src: this.setIconSrc(feature),</span><br><span class="line">					scale: this.scaleAttractionsIcon()</span><br><span class="line">				&#125;)),</span><br><span class="line">				text: new Text(&#123;</span><br><span class="line">					text: this.scaleAttractionsText(feature),</span><br><span class="line">					fill: new Fill(&#123;</span><br><span class="line">						color: &#39;#000&#39;</span><br><span class="line">					&#125;),</span><br><span class="line">					stroke: new Stroke(&#123;</span><br><span class="line">						color: &#39;#fff&#39;,</span><br><span class="line">						width: 2</span><br><span class="line">					&#125;),</span><br><span class="line">					offsetY: 24</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;);</span><br><span class="line">			this.styles.push(style)</span><br><span class="line">			return style;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<p>目前 code 大概長這樣 , 暫時能動 ,  有空接著搞 XD<br><code>map.component.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, Inject, Injectable, OnInit, AfterViewInit &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#39;ol&#x2F;ol.css&#39;;</span><br><span class="line">import Map from &#39;ol&#x2F;Map&#39;;</span><br><span class="line">import View from &#39;ol&#x2F;View&#39;;</span><br><span class="line">import &#123; OSM &#125; from &#39;ol&#x2F;source&#39;;</span><br><span class="line">import TileLayer from &#39;ol&#x2F;layer&#x2F;Tile&#39;;</span><br><span class="line">import GeoJSON from &#39;ol&#x2F;format&#x2F;GeoJSON&#39;;</span><br><span class="line">import VectorSource from &#39;ol&#x2F;source&#x2F;Vector&#39;;</span><br><span class="line">import &#123; Fill, Icon, Stroke, Style, Text &#125; from &#39;ol&#x2F;style&#39;;</span><br><span class="line">import &#123; getBottomLeft, getHeight, getWidth &#125; from &#39;ol&#x2F;extent&#39;;</span><br><span class="line">import &#123; toContext &#125; from &#39;ol&#x2F;render&#39;;</span><br><span class="line">import VectorLayer from &#39;ol&#x2F;layer&#x2F;Vector&#39;;</span><br><span class="line">import XYZ from &#39;ol&#x2F;source&#x2F;XYZ&#39;</span><br><span class="line">import &#123; Control, defaults as defaultControls &#125; from &#39;ol&#x2F;control&#39;;</span><br><span class="line">import &#123; Size &#125; from &#39;ol&#x2F;size&#39;;</span><br><span class="line">import &#123; Feature &#125; from &#39;ol&#39;;</span><br><span class="line">import &#123; Geometry &#125; from &#39;ol&#x2F;geom&#39;;</span><br><span class="line">import &#123; FeatureLike &#125; from &#39;ol&#x2F;Feature&#39;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">	selector: &#39;app-map&#39;,</span><br><span class="line">	templateUrl: &#39;.&#x2F;map.component.html&#39;,</span><br><span class="line">	styleUrls: [&#39;.&#x2F;map.component.css&#39;]</span><br><span class="line">&#125;)</span><br><span class="line">export class MapComponent implements OnInit&#123;</span><br><span class="line">	public map!: Map</span><br><span class="line">	constructor() &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	ngOnInit(): void &#123;</span><br><span class="line">		this.map &#x3D; new Map(&#123;</span><br><span class="line">			controls: defaultControls(&#123;</span><br><span class="line">				attribution: false,</span><br><span class="line">				zoom: false,</span><br><span class="line">				rotate: false</span><br><span class="line">			&#125;).extend([</span><br><span class="line"></span><br><span class="line">			]),</span><br><span class="line">			&#x2F;&#x2F; layers: this.layers,</span><br><span class="line">			layers: [</span><br><span class="line">				this.baseLayer,</span><br><span class="line">				this.attractionsLayer</span><br><span class="line">			],</span><br><span class="line">			target: &#39;map&#39;,</span><br><span class="line">			view: new View(&#123;</span><br><span class="line">				projection: &#39;EPSG:4326&#39;,</span><br><span class="line">				center: [120.4553, 22.873],</span><br><span class="line">				zoom: 11,</span><br><span class="line">				maxZoom: 18,</span><br><span class="line">			&#125;),</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	scaleAttractionsIcon() &#123;</span><br><span class="line">		var zoom &#x3D; this.map.getView().getZoom();</span><br><span class="line"></span><br><span class="line">		if (zoom &#x3D;&#x3D; 9) &#123;</span><br><span class="line">			return 0.4;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if (zoom &lt; 9) &#123;</span><br><span class="line">			return 0.2;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return 1;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	setIconSrc(feature: FeatureLike): string &#123;</span><br><span class="line">		var name &#x3D; feature.getProperties()[&#39;Name&#39;];</span><br><span class="line">		console.log(name);</span><br><span class="line">		return &#96;assets&#x2F;img&#x2F;attractions-min&#x2F;$&#123;name&#125;.jpg&#96;;</span><br><span class="line">		&#x2F;&#x2F; return &#39;&#39;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	attractions &#x3D; &#123;</span><br><span class="line">		&quot;type&quot;: &quot;FeatureCollection&quot;,</span><br><span class="line">		&quot;features&quot;: [</span><br><span class="line">			&#123;</span><br><span class="line">				&quot;type&quot;: &quot;Feature&quot;,</span><br><span class="line">				&quot;properties&quot;: &#123; &quot;Name&quot;: &quot;林老師卡好咖啡&quot; &#125;,</span><br><span class="line">				&quot;geometry&quot;: &#123; &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [120.6817005, 22.9100108] &#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			&#123;</span><br><span class="line">				&quot;type&quot;: &quot;Feature&quot;,</span><br><span class="line">				&quot;properties&quot;: &#123; &quot;Name&quot;: &quot;蛋黃酥冰&quot; &#125;,</span><br><span class="line">				&quot;geometry&quot;: &#123; &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [120.4594596, 23.1247144] &#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			&#123;</span><br><span class="line">				&quot;type&quot;: &quot;Feature&quot;,</span><br><span class="line">				&quot;properties&quot;: &#123; &quot;Name&quot;: &quot;台灣豬隊友&quot; &#125;,</span><br><span class="line">				&quot;geometry&quot;: &#123; &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [120.3314311, 22.6418476] &#125;</span><br><span class="line">			&#125;,</span><br><span class="line">		]</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;定義基本底圖</span><br><span class="line">	baseLayerUrl &#x3D; &#39;https:&#x2F;&#x2F;wmts.nlsc.gov.tw&#x2F;wmts&#x2F;EMAP&#x2F;default&#x2F;GoogleMapsCompatible&#x2F;&#123;z&#125;&#x2F;&#123;y&#125;&#x2F;&#123;x&#125;.png&#39;</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;osm</span><br><span class="line">	&#x2F;&#x2F;baseLayerUrl &#x3D; &#39;https:&#x2F;&#x2F;tile.openstreetmap.org&#x2F;&#123;z&#125;&#x2F;&#123;x&#125;&#x2F;&#123;y&#125;.png&#39;</span><br><span class="line">	baseLayer &#x3D; new TileLayer(&#123;</span><br><span class="line">		source: new XYZ(&#123;</span><br><span class="line">			url: this.baseLayerUrl,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;osm</span><br><span class="line">	osmLayer &#x3D; new TileLayer(&#123;</span><br><span class="line">		source: new OSM(),</span><br><span class="line">	&#125;)</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;樣式</span><br><span class="line">	twLayerStyles: Array&lt;Style&gt; &#x3D; []</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;台灣</span><br><span class="line">	twLayer &#x3D; new VectorLayer(&#123;</span><br><span class="line">		&#x2F;&#x2F; renderMode: &#39;image&#39;,</span><br><span class="line">		source: new VectorSource(&#123;</span><br><span class="line">			format: new GeoJSON(),</span><br><span class="line">			url: &#39;assets&#x2F;data&#x2F;tw.geojson&#39;</span><br><span class="line">		&#125;),</span><br><span class="line">		style: feature &#x3D;&gt; &#123;</span><br><span class="line">			let style: Style</span><br><span class="line">			let countryName &#x3D; feature.getProperties()[&#39;COUNTYNAME&#39;];</span><br><span class="line">			console.log(countryName)</span><br><span class="line"></span><br><span class="line">			let isFind &#x3D; this.twLayerStyles.some(x &#x3D;&gt; x.getText().getText() &#x3D;&#x3D;&#x3D; countryName)</span><br><span class="line">			if (isFind) &#123;</span><br><span class="line">				style &#x3D; this.twLayerStyles.filter(x &#x3D;&gt; x.getText().getText() &#x3D;&#x3D;&#x3D; countryName)[0];</span><br><span class="line">				return style</span><br><span class="line">			&#125; else &#123;</span><br><span class="line"></span><br><span class="line">				let style &#x3D; new Style(&#123;</span><br><span class="line">					stroke: new Stroke(&#123;</span><br><span class="line">						color: &#39;rgba(0, 0, 0, 1)&#39;,</span><br><span class="line">						width: 1</span><br><span class="line">					&#125;),</span><br><span class="line">					text: new Text(&#123;</span><br><span class="line">						text: countryName,</span><br><span class="line">						fill: new Fill(&#123; color: &#39;#000&#39; &#125;),</span><br><span class="line">						stroke: new Stroke(&#123;</span><br><span class="line">							color: &#39;#FF8800&#39;,</span><br><span class="line">							width: 10</span><br><span class="line">						&#125;),</span><br><span class="line">					&#125;)</span><br><span class="line">				&#125;)</span><br><span class="line">				this.twLayerStyles.push(style)</span><br><span class="line">				return style</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	scaleAttractionsText(feature: FeatureLike): string | string[] &#123;</span><br><span class="line">		let name &#x3D; feature.getProperties()[&#39;Name&#39;]</span><br><span class="line">		return name</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	styles: Array&lt;Style&gt; &#x3D; []</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;景點圖層</span><br><span class="line">	attractionsLayer &#x3D; new VectorLayer(&#123;</span><br><span class="line">		source: new VectorSource(&#123;</span><br><span class="line">			format: new GeoJSON(),</span><br><span class="line">			features: new GeoJSON().readFeatures(this.attractions)</span><br><span class="line">			&#x2F;&#x2F;url: &#39;.&#x2F;data&#x2F;attractions.geojson&#39;</span><br><span class="line">		&#125;),</span><br><span class="line"></span><br><span class="line">		style: feature &#x3D;&gt; &#123;</span><br><span class="line">			let style: Style;</span><br><span class="line">			&#x2F;&#x2F; 從 styles 的 cache 裡面找出資料</span><br><span class="line">			let isFind &#x3D; this.styles.some(x &#x3D;&gt; &#123;</span><br><span class="line">				return x.getText().getText() &#x3D;&#x3D;&#x3D; feature.get(&#39;Name&#39;)</span><br><span class="line">			&#125;)</span><br><span class="line">			console.log(&#39;isFind&#39;, isFind)</span><br><span class="line">			if (isFind) &#123;</span><br><span class="line">				&#x2F;&#x2F; 如果 styles 的 cache 裡面有資料的話 , 回傳該名稱的樣式</span><br><span class="line">				style &#x3D; this.styles.filter(x &#x3D;&gt; &#123;</span><br><span class="line">					return x.getText().getText() &#x3D;&#x3D;&#x3D; feature.get(&#39;Name&#39;)</span><br><span class="line">				&#125;)[0]</span><br><span class="line">				return style</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				&#x2F;&#x2F; 如果沒找到的話新增 style 並且 push 到裡面去 , 最後回傳</span><br><span class="line">				style &#x3D; new Style(&#123;</span><br><span class="line">					image: new Icon((&#123;</span><br><span class="line">						src: this.setIconSrc(feature),</span><br><span class="line">						scale: this.scaleAttractionsIcon()</span><br><span class="line">					&#125;)),</span><br><span class="line">					text: new Text(&#123;</span><br><span class="line">						text: this.scaleAttractionsText(feature),</span><br><span class="line">						fill: new Fill(&#123;</span><br><span class="line">							color: &#39;#000&#39;</span><br><span class="line">						&#125;),</span><br><span class="line">						stroke: new Stroke(&#123;</span><br><span class="line">							color: &#39;#fff&#39;,</span><br><span class="line">							width: 2</span><br><span class="line">						&#125;),</span><br><span class="line">						offsetY: 24</span><br><span class="line">					&#125;)</span><br><span class="line">				&#125;);</span><br><span class="line">				this.styles.push(style)</span><br><span class="line">				return style;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="TodoMVC-練習"><a href="#TodoMVC-練習" class="headerlink" title="TodoMVC 練習"></a>TodoMVC 練習</h3><p>第一次自己寫破破爛爛的 QQ , 不過還是加減<a href="https://stackblitz.com/edit/lasai-todo?file=src%2Fapp%2Fapp.component.ts" target="_blank" rel="noopener">保留</a><br>後來發現保哥也有這個<a href="https://www.youtube.com/watch?v=aMeF8ksXv7o" target="_blank" rel="noopener">練習</a> , 不過他又切得更複雜 , 另外他的版本功能少了一兩個 , 不是原本版本 </p>
<p><a href="https://github.com/tastejs/todomvc-app-template" target="_blank" rel="noopener">版型下載</a> 注意他的 css 在 <code>node_module</code> 裡面要自己搬出來</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;tastejs&#x2F;todomvc-app-template.git</span><br><span class="line">cd todomvc-app-template</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>接著建立自己的 todomvc</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng new todomvc --strict&#x3D;false --style&#x3D;css --routing&#x3D;true</span><br></pre></td></tr></table></figure>

<p>加入這段到 <code>package.json</code> 方便另外一台電腦看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">	&quot;starthost&quot;: &quot;ng serve --host 0.0.0.0 --disable-host-check&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ps: 如果套其他版型可以在專案 root 那層先建立 <code>template</code> 資料夾然後把版丟進去 , 加入到 git 裡面版控</p>
<p>把 <code>app.component.html</code> 裡面內容清空<br>把版型的 <code>css</code> 複製到 <code>assets</code><br>複製版型 <code>index.html</code> 內的 <code>head</code> 區塊部分到自己 <code>src\index.html</code> 裡面 , 特別注意保留 <code>&lt;base href=&quot;/&quot;&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;base href&#x3D;&quot;&#x2F;&quot;&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;Todomvc&lt;&#x2F;title&gt;</span><br><span class="line">	&lt;meta name&#x3D;&quot;viewport&quot;</span><br><span class="line">		content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt;</span><br><span class="line">	&lt;link rel&#x3D;&quot;icon&quot;</span><br><span class="line">		type&#x3D;&quot;image&#x2F;x-icon&quot;</span><br><span class="line">		href&#x3D;&quot;favicon.ico&quot;&gt;</span><br><span class="line">	&lt;link rel&#x3D;&quot;stylesheet&quot;</span><br><span class="line">		href&#x3D;&quot;.&#x2F;assets&#x2F;index.css&quot;&gt;</span><br><span class="line">	&lt;link rel&#x3D;&quot;stylesheet&quot;</span><br><span class="line">		href&#x3D;&quot;.&#x2F;assets&#x2F;base.css&quot;&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br></pre></td></tr></table></figure>

<p>接著把版型 <code>body</code> 裡面的部分貼到 <code>app.component.html</code> , 接著執行看看 <code>http://localhost:4200/</code> 到此就正常了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng serve</span><br></pre></td></tr></table></figure>

<p>開啟 <a href="https://todomvc.com/examples/angular2/" target="_blank" rel="noopener">Angular 版本的 TodoMVC</a> 來看看它的效果 , 發現比其他版本還兩光偷懶了好幾個功能<br>所以用 <a href="https://todomvc.com/examples/vanilladart/build/web/" target="_blank" rel="noopener">所以換成 Dart 版本的 TodoMVC</a> 開始模擬效果</p>
<p>先修改 title 屬性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title &#x3D; &#39;lasai todo&#39;</span><br></pre></td></tr></table></figure>

<p>然後做個 binding , 確認正常運作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure>


<p>如果 two way binding 陣亡的話要補 <code>FormsModule</code><br><code>app.module.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import &#123; NgModule &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; FormsModule &#125; from &#39;@angular&#x2F;forms&#39;;</span><br><span class="line">import &#123; BrowserModule &#125; from &#39;@angular&#x2F;platform-browser&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; AppRoutingModule &#125; from &#39;.&#x2F;app-routing.module&#39;;</span><br><span class="line">import &#123; AppComponent &#125; from &#39;.&#x2F;app.component&#39;;</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">	declarations: [</span><br><span class="line">		AppComponent</span><br><span class="line">	],</span><br><span class="line">	imports: [</span><br><span class="line">		BrowserModule,</span><br><span class="line">		AppRoutingModule,</span><br><span class="line">		FormsModule</span><br><span class="line">	],</span><br><span class="line">	providers: [],</span><br><span class="line">	bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure>


<p>建立 <code>Todo</code> 的類別</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">export class Todo &#123;</span><br><span class="line">	constructor(</span><br><span class="line">		id: number,</span><br><span class="line">		title: string,</span><br><span class="line">		complete: boolean,</span><br><span class="line">		editing: boolean</span><br><span class="line">	) &#123;</span><br><span class="line">		this.id &#x3D; id</span><br><span class="line">		this.title &#x3D; title</span><br><span class="line">		this.complete &#x3D; complete</span><br><span class="line">		this.editing &#x3D; editing</span><br><span class="line">	&#125;</span><br><span class="line">	id: number</span><br><span class="line">	title: string &#x3D; &#39;&#39;</span><br><span class="line">	complete: boolean &#x3D; false</span><br><span class="line">	editing: boolean &#x3D; false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>建立 <code>IDGen</code> 類別</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export class IdGen &#123;</span><br><span class="line">	id: number &#x3D; 0</span><br><span class="line">	public next(): number &#123;</span><br><span class="line">		this.id +&#x3D; 1</span><br><span class="line">		return this.id</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>AppComponent</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">export class AppComponent &#123;</span><br><span class="line">	title &#x3D; &#39;lasai todo&#39;;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;All</span><br><span class="line">	&#x2F;&#x2F;Active</span><br><span class="line">	&#x2F;&#x2F;Complete</span><br><span class="line">	selected &#x3D; &#39;All&#39;</span><br><span class="line"></span><br><span class="line">	selectedAll &#x3D; true</span><br><span class="line">	selectedActive &#x3D; false</span><br><span class="line">	selectedCompleted &#x3D; false</span><br><span class="line"></span><br><span class="line">	gen &#x3D; new IdGen()</span><br><span class="line"></span><br><span class="line">	todos: Todo[] &#x3D; [</span><br><span class="line">		new Todo(this.gen.next(), &#39;買菜&#39;, true, false),</span><br><span class="line">		new Todo(this.gen.next(), &#39;洗衣服&#39;, false, false),</span><br><span class="line">	]</span><br><span class="line"></span><br><span class="line">	getTodos(): Todo[] &#123;</span><br><span class="line">		if (this.selectedAll)</span><br><span class="line">			return this.todos</span><br><span class="line"></span><br><span class="line">		if (this.selectedActive)</span><br><span class="line">			return this.todos.filter(x &#x3D;&gt; x.complete &#x3D;&#x3D;&#x3D; false)</span><br><span class="line"></span><br><span class="line">		if (this.selectedCompleted)</span><br><span class="line">			return this.todos.filter(x &#x3D;&gt; x.complete &#x3D;&#x3D;&#x3D; true)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	addTodo(todoInput: HTMLInputElement): void &#123;</span><br><span class="line">		if (todoInput.value.trim().length &gt; 0) &#123;</span><br><span class="line">			let todo &#x3D; new Todo(this.gen.next(), todoInput.value, false, false)</span><br><span class="line">			this.todos.push(todo)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		todoInput.value &#x3D; &#39;&#39;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	lostEvent(event, todo: Todo) &#123;</span><br><span class="line">		console.log(event)</span><br><span class="line"></span><br><span class="line">		todo.editing &#x3D; false</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	toggleEdit(todo: Todo) &#123;</span><br><span class="line">		console.log(todo)</span><br><span class="line">		if (todo.editing &#x3D;&#x3D;&#x3D; false) &#123;</span><br><span class="line">			todo.editing &#x3D; true</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	deleteTodo(todo: Todo) &#123;</span><br><span class="line">		this.todos &#x3D; this.todos.filter(x &#x3D;&gt; x.id !&#x3D; todo.id)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	getActiveCount() &#123;</span><br><span class="line">		return this.todos.filter(x &#x3D;&gt; x.complete &#x3D;&#x3D;&#x3D; false).length</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	hasAnyCompleted() &#123;</span><br><span class="line">		return this.todos.some(x &#x3D;&gt; x.complete &#x3D;&#x3D; true)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	clearCompleted() &#123;</span><br><span class="line">		this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; false)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	toggleClear() &#123;</span><br><span class="line">		switch (this.selected) &#123;</span><br><span class="line">			case &#39;All&#39;:</span><br><span class="line">				let everyComplete &#x3D; this.todos.every(x &#x3D;&gt; x.complete &#x3D;&#x3D; true)</span><br><span class="line">				if (everyComplete) &#123;</span><br><span class="line">					this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; false)</span><br><span class="line">					return</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				let everyNotComplete &#x3D; this.todos.every(x &#x3D;&gt; x.complete &#x3D;&#x3D; false)</span><br><span class="line">				if (everyNotComplete) &#123;</span><br><span class="line">					this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; true)</span><br><span class="line">					return</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				let anyCompleted &#x3D; this.todos.some(x &#x3D;&gt; x.complete &#x3D;&#x3D; true)</span><br><span class="line">				if (anyCompleted) &#123;</span><br><span class="line">					this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; true)</span><br><span class="line">					return</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				break;</span><br><span class="line">			case &#39;Active&#39;:</span><br><span class="line">				this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; true)</span><br><span class="line">				break;</span><br><span class="line">			case &#39;Completed&#39;:</span><br><span class="line">				this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; false)</span><br><span class="line">				break;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	toggleSelected(tag) &#123;</span><br><span class="line">		console.log(tag.text)</span><br><span class="line">		this.selected &#x3D; tag.text</span><br><span class="line">		switch (this.selected) &#123;</span><br><span class="line">			case &#39;All&#39;:</span><br><span class="line">				this.selectedAll &#x3D; true</span><br><span class="line">				this.selectedActive &#x3D; false</span><br><span class="line">				this.selectedCompleted &#x3D; false</span><br><span class="line">				break;</span><br><span class="line">			case &#39;Active&#39;:</span><br><span class="line">				this.selectedAll &#x3D; false</span><br><span class="line">				this.selectedActive &#x3D; true</span><br><span class="line">				this.selectedCompleted &#x3D; false</span><br><span class="line">				break;</span><br><span class="line">			case &#39;Completed&#39;:</span><br><span class="line">				this.selectedAll &#x3D; false</span><br><span class="line">				this.selectedActive &#x3D; false</span><br><span class="line">				this.selectedCompleted &#x3D; true</span><br><span class="line">				break;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>最後修改 html 然後把幾個 binding 的內容放進去<br><code>app.component.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;section class&#x3D;&quot;todoapp&quot;&gt;</span><br><span class="line">	&lt;header class&#x3D;&quot;header&quot;&gt;</span><br><span class="line">		&lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">		&lt;input class&#x3D;&quot;new-todo&quot;</span><br><span class="line">			placeholder&#x3D;&quot;What needs to be done?&quot;</span><br><span class="line">			#todoInput</span><br><span class="line">			(keyup.enter)&#x3D;&quot;addTodo(todoInput)&quot;</span><br><span class="line">			autofocus&gt;</span><br><span class="line">	&lt;&#x2F;header&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- This section should be hidden by default and shown when there are todos --&gt;</span><br><span class="line">	&lt;section class&#x3D;&quot;main&quot;&gt;</span><br><span class="line">		&lt;input id&#x3D;&quot;toggle-all&quot;</span><br><span class="line">			class&#x3D;&quot;toggle-all&quot;</span><br><span class="line">			type&#x3D;&quot;checkbox&quot;</span><br><span class="line">			(click)&#x3D;&quot;toggleClear()&quot;&gt;</span><br><span class="line">		&lt;label for&#x3D;&quot;toggle-all&quot; *ngIf&#x3D;&quot;todos.length &gt; 0&quot;&gt;Mark all as complete&lt;&#x2F;label&gt;</span><br><span class="line">		&lt;ul class&#x3D;&quot;todo-list&quot; *ngFor&#x3D;&quot;let todo of getTodos()&quot;&gt;</span><br><span class="line"></span><br><span class="line">			&lt;li [class]&#x3D;&quot;&#123; completed : todo.complete, editing : todo.editing &#125;&quot;</span><br><span class="line">				&gt;</span><br><span class="line">				&lt;div class&#x3D;&quot;view&quot;&gt;</span><br><span class="line">					&lt;input class&#x3D;&quot;toggle&quot;</span><br><span class="line">						type&#x3D;&quot;checkbox&quot;</span><br><span class="line">						[checked]&#x3D;&quot;todo.complete&quot;</span><br><span class="line">						(change)&#x3D;&quot;todo.complete &#x3D; !todo.complete&quot;&gt;</span><br><span class="line">					&lt;label</span><br><span class="line">						(dblclick)&#x3D;&quot;toggleEdit(todo)&quot;</span><br><span class="line">						(blur)&#x3D;&quot;lostEvent($event, todo)&quot;</span><br><span class="line">					&gt;&#123;&#123;todo.title&#125;&#125; (&#123;&#123;todo.id&#125;&#125;)&lt;&#x2F;label&gt;</span><br><span class="line">					&lt;button class&#x3D;&quot;destroy&quot;</span><br><span class="line">						(click)&#x3D;&quot;deleteTodo(todo)&quot;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">				&lt;&#x2F;div&gt;</span><br><span class="line">				&lt;input class&#x3D;&quot;edit&quot;</span><br><span class="line">					#itemInput</span><br><span class="line">					(mouseenter)&#x3D;&quot;itemInput.focus()&quot;</span><br><span class="line">					(blur)&#x3D;&quot;lostEvent($event, todo)&quot;</span><br><span class="line">					[(ngModel)]&#x3D;&quot;todo.title&quot;</span><br><span class="line">					&gt;</span><br><span class="line">			&lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">		&lt;&#x2F;ul&gt;</span><br><span class="line">	&lt;&#x2F;section&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- This footer should be hidden by default and shown when there are todos --&gt;</span><br><span class="line">	&lt;footer class&#x3D;&quot;footer&quot; *ngIf&#x3D;&quot;todos.length &gt; 0&quot;&gt;</span><br><span class="line">		&lt;!-- This should be &#96;0 items left&#96; by default --&gt;</span><br><span class="line">		&lt;span class&#x3D;&quot;todo-count&quot;&gt;&lt;strong&gt;&#123;&#123;getActiveCount()&#125;&#125;&lt;&#x2F;strong&gt; item left&lt;&#x2F;span&gt;</span><br><span class="line">		&lt;!-- Remove this if you don&#39;t implement routing --&gt;</span><br><span class="line">		&lt;ul class&#x3D;&quot;filters&quot;&gt;</span><br><span class="line">			&lt;li&gt;</span><br><span class="line">				&lt;a [ngClass]&#x3D;&quot;selectedAll ? &#39;selected&#39; : &#39;&#39;&quot;</span><br><span class="line">					#tagAll</span><br><span class="line">					(click)&#x3D;&quot;toggleSelected(tagAll)&quot;</span><br><span class="line">					href&#x3D;&quot;javascript:;&quot;&gt;All&lt;&#x2F;a&gt;</span><br><span class="line">			&lt;&#x2F;li&gt;</span><br><span class="line">			&lt;li&gt;</span><br><span class="line"></span><br><span class="line">				&lt;a [ngClass]&#x3D;&quot;selectedActive ? &#39;selected&#39; : &#39;&#39;&quot;</span><br><span class="line">					#tagActive</span><br><span class="line">					(click)&#x3D;&quot;toggleSelected(tagActive)&quot;</span><br><span class="line">					href&#x3D;&quot;javascript:;&quot;&gt;Active&lt;&#x2F;a&gt;</span><br><span class="line">			&lt;&#x2F;li&gt;</span><br><span class="line">			&lt;li&gt;</span><br><span class="line">				&lt;a [ngClass]&#x3D;&quot;selectedCompleted ? &#39;selected&#39; : &#39;&#39;&quot;</span><br><span class="line">					#tagCompleted</span><br><span class="line">					(click)&#x3D;&quot;toggleSelected(tagCompleted)&quot;</span><br><span class="line">					href&#x3D;&quot;javascript:;&quot;&gt;Completed&lt;&#x2F;a&gt;</span><br><span class="line">			&lt;&#x2F;li&gt;</span><br><span class="line">		&lt;&#x2F;ul&gt;</span><br><span class="line">		&lt;!-- Hidden if no completed items are left ↓ --&gt;</span><br><span class="line">		&lt;button</span><br><span class="line">			class&#x3D;&quot;clear-completed&quot;</span><br><span class="line">			*ngIf&#x3D;&quot;hasAnyCompleted()&quot;</span><br><span class="line">			(click)&#x3D;&quot;clearCompleted()&quot;&gt;Clear completed&lt;&#x2F;button&gt;</span><br><span class="line">	&lt;&#x2F;footer&gt;</span><br><span class="line">&lt;&#x2F;section&gt;</span><br><span class="line"></span><br><span class="line">&lt;footer class&#x3D;&quot;info&quot;&gt;</span><br><span class="line">	&lt;p&gt;Double-click to edit a todo&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;!-- Remove the below line ↓ --&gt;</span><br><span class="line">	&lt;p&gt;Template by &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;sindresorhus.com&quot;&gt;Sindre Sorhus&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;!-- Change this out with your name and url ↓ --&gt;</span><br><span class="line">	&lt;p&gt;Created by &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;todomvc.com&quot;&gt;you&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;p&gt;Part of &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;todomvc.com&quot;&gt;TodoMVC&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;footer&gt;</span><br></pre></td></tr></table></figure>

<h3 id="TodoMVC-練習-http-版"><a href="#TodoMVC-練習-http-版" class="headerlink" title="TodoMVC 練習 http 版"></a>TodoMVC 練習 http 版</h3><h4 id="建立後端-api"><a href="#建立後端-api" class="headerlink" title="建立後端 api"></a>建立後端 api</h4><p>因為比較熟 .net 就用 .net 6 來寫看看</p>
<p>建立 <code>Models</code> 資料夾 , 加入以下類別</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">namespace TodoWebApi.Models</span><br><span class="line">&#123;</span><br><span class="line">    public class Todo</span><br><span class="line">    &#123;</span><br><span class="line">        public int Id &#123; get; set; &#125;</span><br><span class="line">        public string Title &#123; get; set; &#125;</span><br><span class="line">        public bool Complete &#123; get; set; &#125;</span><br><span class="line">        public bool Editing &#123; get; set; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>建立 <code>Repositories</code> 資料夾 , 然後加入以下類別</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">using TodoWebApi.Models;</span><br><span class="line"></span><br><span class="line">namespace TodoWebApi.Repositories</span><br><span class="line">&#123;</span><br><span class="line">    public interface ITodoRepo</span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;Todo&gt; GetTodos();</span><br><span class="line">        Todo AddTod(Todo todo);</span><br><span class="line">        Todo DeleteTodo(int id);</span><br><span class="line"></span><br><span class="line">        Todo UpdateTodo(Todo todo);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public class IDGen</span><br><span class="line">    &#123;</span><br><span class="line">        private int idCounter &#x3D; 1;</span><br><span class="line">        public int NextId() &#123; return idCounter++; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public class TodoRepo : ITodoRepo</span><br><span class="line">    &#123;</span><br><span class="line">        IDGen gen &#x3D; new IDGen();</span><br><span class="line">        List&lt;Todo&gt; result &#x3D; new List&lt;Todo&gt;();</span><br><span class="line"></span><br><span class="line">        public TodoRepo()</span><br><span class="line">        &#123;</span><br><span class="line">            var todo &#x3D; new Todo()</span><br><span class="line">            &#123;</span><br><span class="line">                Id &#x3D; gen.NextId(),</span><br><span class="line">                Title &#x3D; &quot;買 5O 嵐&quot;,</span><br><span class="line">                Complete &#x3D; true,</span><br><span class="line">                Editing &#x3D; false</span><br><span class="line">            &#125;;</span><br><span class="line">            result.Add(todo);</span><br><span class="line"></span><br><span class="line">            todo &#x3D; new Todo()</span><br><span class="line">            &#123;</span><br><span class="line">                Id &#x3D; gen.NextId(),</span><br><span class="line">                Title &#x3D; &quot;問候正宜&quot;,</span><br><span class="line">                Complete &#x3D; true,</span><br><span class="line">                Editing &#x3D; false</span><br><span class="line">            &#125;;</span><br><span class="line">            result.Add(todo);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            todo &#x3D; new Todo()</span><br><span class="line">            &#123;</span><br><span class="line">                Id &#x3D; gen.NextId(),</span><br><span class="line">                Title &#x3D; &quot;測試&quot;,</span><br><span class="line">                Complete &#x3D; false,</span><br><span class="line">                Editing &#x3D; false</span><br><span class="line">            &#125;;</span><br><span class="line">            result.Add(todo);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            todo &#x3D; new Todo()</span><br><span class="line">            &#123;</span><br><span class="line">                Id &#x3D; gen.NextId(),</span><br><span class="line">                Title &#x3D; &quot;電龜&quot;,</span><br><span class="line">                Complete &#x3D; false,</span><br><span class="line">                Editing &#x3D; false</span><br><span class="line">            &#125;;</span><br><span class="line">            result.Add(todo);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        public List&lt;Todo&gt; GetTodos()</span><br><span class="line">        &#123;</span><br><span class="line">            return result;</span><br><span class="line">        &#125;</span><br><span class="line">        public Todo AddTod(Todo todo)</span><br><span class="line">        &#123;</span><br><span class="line">            todo.Id &#x3D; gen.NextId();</span><br><span class="line">            this.result.Add(todo);</span><br><span class="line">            return todo;</span><br><span class="line">        &#125;</span><br><span class="line">        public Todo DeleteTodo(int id)</span><br><span class="line">        &#123;</span><br><span class="line">            var todo &#x3D; this.result.Find(x &#x3D;&gt; x.Id &#x3D;&#x3D; id);</span><br><span class="line">            if (todo !&#x3D; null)</span><br><span class="line">                this.result.Remove(todo);</span><br><span class="line"></span><br><span class="line">            return todo;</span><br><span class="line">        &#125;</span><br><span class="line">        public Todo UpdateTodo(Todo todo)</span><br><span class="line">        &#123;</span><br><span class="line">            var find &#x3D; this.result.Find(x &#x3D;&gt; x.Id &#x3D;&#x3D; todo.Id);</span><br><span class="line">            find.Complete &#x3D; todo.Complete;</span><br><span class="line">            find.Title &#x3D; todo.Title;</span><br><span class="line">            find.Editing &#x3D; todo.Editing;</span><br><span class="line">            Console.WriteLine(this.result);</span><br><span class="line">            return find;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public List&lt;Todo&gt; ClearCompleted()</span><br><span class="line">        &#123;</span><br><span class="line">            this.result.ForEach(x &#x3D;&gt; x.Complete &#x3D; false);</span><br><span class="line">            return this.result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        public List&lt;Todo&gt; MakeCompleted()</span><br><span class="line">        &#123;</span><br><span class="line">            this.result.ForEach(x &#x3D;&gt; x.Complete &#x3D; true);</span><br><span class="line">            return this.result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>建立 Controller</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">using Microsoft.AspNetCore.Mvc;</span><br><span class="line">using TodoWebApi.Models;</span><br><span class="line">using TodoWebApi.Repositories;</span><br><span class="line"></span><br><span class="line">namespace TodoWebApi.Controllers</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [ApiController]</span><br><span class="line">    [Route(&quot;api&#x2F;[controller]&quot;)]</span><br><span class="line">    public class TodoController : ControllerBase</span><br><span class="line">    &#123;</span><br><span class="line">        private ITodoRepo todoRepo;</span><br><span class="line">        public TodoController(ITodoRepo todoRepo)</span><br><span class="line">        &#123;</span><br><span class="line">            this.todoRepo &#x3D; todoRepo; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 取得待辦事項清單</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;returns&gt;&lt;&#x2F;returns&gt;</span><br><span class="line">        [HttpGet]</span><br><span class="line">        public List&lt;Todo&gt; GetTodos()</span><br><span class="line">        &#123;</span><br><span class="line">            return todoRepo.GetTodos();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 更新待辦事項</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;todo&quot;&gt;&lt;&#x2F;param&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;returns&gt;&lt;&#x2F;returns&gt;</span><br><span class="line"></span><br><span class="line">        [HttpPut]</span><br><span class="line">        public Todo UpdateTodo(Todo todo)</span><br><span class="line">        &#123;</span><br><span class="line">            var result &#x3D; this.todoRepo.UpdateTodo(todo);</span><br><span class="line">            Console.WriteLine(this.todoRepo.GetTodos());</span><br><span class="line">            return result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 新增待辦事項</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;todo&quot;&gt;&lt;&#x2F;param&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;returns&gt;&lt;&#x2F;returns&gt;</span><br><span class="line">        [HttpPost]</span><br><span class="line">        public Todo AddTod(Todo todo)</span><br><span class="line">        &#123;</span><br><span class="line">            this.todoRepo.AddTod(todo);</span><br><span class="line">            return todo;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 將待辦事項全數清除</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;returns&gt;&lt;&#x2F;returns&gt;</span><br><span class="line">        [HttpPost(&quot;ClearCompleted&quot;)]</span><br><span class="line">        public List&lt;Todo&gt; ClearCompleted()</span><br><span class="line">        &#123;</span><br><span class="line">            var repo &#x3D; this.todoRepo as TodoRepo;</span><br><span class="line">            var result &#x3D; repo.ClearCompleted();</span><br><span class="line">            return result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 標示待辦事項全數完成</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;returns&gt;&lt;&#x2F;returns&gt;</span><br><span class="line">        [HttpPost(&quot;MakeCompleted&quot;)]</span><br><span class="line">        public List&lt;Todo&gt; MakeCompleted()</span><br><span class="line">        &#123;</span><br><span class="line">            var repo &#x3D; this.todoRepo as TodoRepo;</span><br><span class="line">            var result &#x3D; repo.MakeCompleted();</span><br><span class="line">            return result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; 刪除待辦事項</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;&#x2F;summary&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;param name&#x3D;&quot;id&quot;&gt;&lt;&#x2F;param&gt;</span><br><span class="line">        &#x2F;&#x2F;&#x2F; &lt;returns&gt;&lt;&#x2F;returns&gt;</span><br><span class="line">        [HttpDelete(&quot;&#123;id:int&#125;&quot;)]</span><br><span class="line">        public Todo DeleteTodo(int id)</span><br><span class="line">        &#123;</span><br><span class="line">            var todo &#x3D; this.todoRepo.DeleteTodo(id);</span><br><span class="line">            return todo;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>這裡重點就是需要把 DI 的部分調成單體模式注入 , 才不會每次 request 都去 new TodoRepo 讓物件暫時保存在 memory 裡面<br>另外前端因為 port 不同應該為有 CORS , 這裡也需要設定下<br>最後如果要讓 api 有文件的話 , 在 <code>Project</code> =&gt; <code>Properties</code> =&gt; <code>Output</code> =&gt; <code>Documnet file</code>  打勾才會生出 xml 文件</p>
<p><code>Program.cs</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">using System.Reflection;</span><br><span class="line">using TodoWebApi.Repositories;</span><br><span class="line"></span><br><span class="line">var builder &#x3D; WebApplication.CreateBuilder(args);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Add services to the container.</span><br><span class="line"></span><br><span class="line">builder.Services.AddControllers();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;要這樣設定 DI 才會暫時用單體模式保存在記憶體裡面</span><br><span class="line">builder.Services.AddSingleton&lt;ITodoRepo, TodoRepo&gt;();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Learn more about configuring Swagger&#x2F;OpenAPI at https:&#x2F;&#x2F;aka.ms&#x2F;aspnetcore&#x2F;swashbuckle</span><br><span class="line">builder.Services.AddEndpointsApiExplorer();</span><br><span class="line">builder.Services.AddSwaggerGen(c &#x3D;&gt;</span><br><span class="line">&#123;</span><br><span class="line">    c.SwaggerDoc(&quot;v1&quot;, new Microsoft.OpenApi.Models.OpenApiInfo &#123; Title &#x3D; &quot;Todo&quot;, Version &#x3D; &quot;v1&quot; &#125;);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;Locate the XML file being generated by ASP.NET...</span><br><span class="line">    var xmlFile &#x3D; $&quot;&#123;Assembly.GetExecutingAssembly().GetName().Name&#125;.XML&quot;;</span><br><span class="line">    var xmlPath &#x3D; Path.Combine(AppContext.BaseDirectory, xmlFile);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;... and tell Swagger to use those XML comments.</span><br><span class="line">    c.IncludeXmlComments(xmlPath);</span><br><span class="line">    c.IncludeXmlComments(xmlPath);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;CORS設定</span><br><span class="line">&#x2F;&#x2F;https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;70511588&#x2F;how-to-enable-cors-in-asp-net-core-6-0-web-api-project</span><br><span class="line">builder.Services.AddCors(p &#x3D;&gt; p.AddPolicy(&quot;corsapp&quot;, builder &#x3D;&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        builder.WithOrigins(&quot;*&quot;).AllowAnyMethod().AllowAnyHeader();</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">var app &#x3D; builder.Build();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Configure the HTTP request pipeline.</span><br><span class="line">if (app.Environment.IsDevelopment())</span><br><span class="line">&#123;</span><br><span class="line">    app.UseSwagger();</span><br><span class="line">    app.UseSwaggerUI();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;暫時不用 https</span><br><span class="line">&#x2F;&#x2F;app.UseHttpsRedirection();</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F;CORS設定</span><br><span class="line">app.UseCors(&quot;corsapp&quot;);</span><br><span class="line"></span><br><span class="line">app.UseAuthorization();</span><br><span class="line"></span><br><span class="line">app.MapControllers();</span><br><span class="line"></span><br><span class="line">app.Run();</span><br></pre></td></tr></table></figure>

<p>最後調整 <code>launchSettings.json</code> , 特別注意要把 <code>localhost</code> 改成 <code>0.0.0.0</code> 這樣其他同網段電腦才可以訪問到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;$schema&quot;: &quot;https:&#x2F;&#x2F;json.schemastore.org&#x2F;launchsettings.json&quot;,</span><br><span class="line">  &quot;iisSettings&quot;: &#123;</span><br><span class="line">    &quot;windowsAuthentication&quot;: false,</span><br><span class="line">    &quot;anonymousAuthentication&quot;: true,</span><br><span class="line">    &quot;iisExpress&quot;: &#123;</span><br><span class="line">      &quot;applicationUrl&quot;: &quot;http:&#x2F;&#x2F;localhost:59664&quot;,</span><br><span class="line">      &quot;sslPort&quot;: 44389</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;profiles&quot;: &#123;</span><br><span class="line">    &quot;TodoWebApi&quot;: &#123;</span><br><span class="line">      &quot;commandName&quot;: &quot;Project&quot;,</span><br><span class="line">      &quot;dotnetRunMessages&quot;: true,</span><br><span class="line">      &quot;launchBrowser&quot;: true,</span><br><span class="line">      &quot;launchUrl&quot;: &quot;swagger&quot;,</span><br><span class="line">      &quot;applicationUrl&quot;: &quot;https:&#x2F;&#x2F;0.0.0.0:5001;http:&#x2F;&#x2F;0.0.0.0:5000&quot;,</span><br><span class="line">      &quot;environmentVariables&quot;: &#123;</span><br><span class="line">        &quot;ASPNETCORE_ENVIRONMENT&quot;: &quot;Development&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="建立前端"><a href="#建立前端" class="headerlink" title="建立前端"></a>建立前端</h4><p>如果後端沒設定 <code>CORS</code> 這裡要先設定 <code>CORS</code> , 不然會炸得不要不要的 , 要 try 的話記得先把剛剛後端的 CORS 註解起來<br>在你的專案根目錄加入這個檔案 <code>proxy.config.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;context&quot;: &quot;&#x2F;&quot;,</span><br><span class="line">	&quot;target&quot;: &quot;http:&#x2F;&#x2F;123.45.67:5000&quot;,</span><br><span class="line">	&quot;secure&quot;: false,</span><br><span class="line">	&quot;changeOrigin&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>context</code> 是你的 api 前墜 , 如果你的 Controller prefix 有掛 api 的話會長這樣 <code>[Route(&quot;api/[controller]&quot;)]</code><br><code>target</code> 沒啥好說的就是你 api 的 ip 位置<br><code>secure</code> 應該跟 https 有關<br>詳細可以看這篇保哥 <a href="https://blog.miniasp.com/post/2017/02/05/Setup-proxy-to-backend-in-Angular-CLI" target="_blank" rel="noopener">文章</a> , 又是保哥 XD<br>這時你的設定檔要寫這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;context&quot;: &quot;&#x2F;api&quot;,</span><br><span class="line">	&quot;target&quot;: &quot;http:&#x2F;&#x2F;123.45.67:5000&quot;,</span><br><span class="line">	&quot;secure&quot;: false,</span><br><span class="line">	&quot;changeOrigin&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改 <code>package.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;starthost&quot;: &quot;ng serve --host 0.0.0.0 --disable-host-check --proxy-config proxy.config.json&quot;,</span><br></pre></td></tr></table></figure>

<p>最後寫 Http 相關呼叫時也要加上 prefix 像是下面這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getTodos() : Observable&lt;Todo[]&gt; &#123;</span><br><span class="line">	&#x2F;&#x2F; return this.http.get&lt;Todo[]&gt;(&#39;http:&#x2F;&#x2F;123.45.67.89:5000&#x2F;api&#x2F;Todo&#39;)</span><br><span class="line">	return this.http.get&lt;Todo[]&gt;(&#39;api&#x2F;Todo&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>設定服務注入 <code>todo.service.ts</code><br>順便科普在這裡 <code>deleteTodo</code> 的 <code>url</code> 部分用 <code>反引號</code> 包著 , 常常忘記 <code>反引號</code> 的術語叫做 <code>backtick</code> aka <code>backquote</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#96;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Injectable, OnInit &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; map, Observable &#125; from &#39;rxjs&#39;;</span><br><span class="line">import &#123; Todo &#125; from &#39;.&#x2F;todo&#39;;</span><br><span class="line">import &#123; HttpClient &#125; from &#39;@angular&#x2F;common&#x2F;http&#39;;</span><br><span class="line"></span><br><span class="line">@Injectable(&#123;</span><br><span class="line">	providedIn: &#39;root&#39;</span><br><span class="line">&#125;)</span><br><span class="line">export class TodoService &#123;</span><br><span class="line"></span><br><span class="line">	constructor(private http: HttpClient) &#123; &#125;</span><br><span class="line"></span><br><span class="line">	private todos: Todo[] &#x3D; []</span><br><span class="line"></span><br><span class="line">	getTodos() : Observable&lt;Todo[]&gt; &#123;</span><br><span class="line">		&#x2F;&#x2F; return this.http.get&lt;Todo[]&gt;(&#39;http:&#x2F;&#x2F;123.45.67.89:5000&#x2F;Todo&#39;)</span><br><span class="line">		return this.http.get&lt;Todo[]&gt;(&#39;api&#x2F;Todo&#39;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	deleteTodo(id : number)&#123;</span><br><span class="line">		return this.http.delete&lt;Todo&gt;(&#96;api&#x2F;Todo&#x2F;$&#123;id&#125;&#96;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	addTodo(todo: Todo)&#123;</span><br><span class="line">		return this.http.post&lt;Todo&gt;(&#39;api&#x2F;Todo&#39;, todo)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	updateTodo(todo: Todo)&#123;</span><br><span class="line">		return this.http.put&lt;Todo&gt;(&#39;api&#x2F;Todo&#39;, todo)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	makeCompleted()&#123;</span><br><span class="line">		return this.http.post&lt;Todo[]&gt;(&#39;api&#x2F;Todo&#x2F;MakeCompleted&#39;, &#123;</span><br><span class="line"></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	clearCompleted()&#123;</span><br><span class="line">		return this.http.post&lt;Todo[]&gt;(&#39;api&#x2F;Todo&#x2F;ClearCompleted&#39;, &#123;</span><br><span class="line"></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因為要用 di 注入 , 所以要調整 <code>app.module.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import &#123; TodoService &#125; from &#39;.&#x2F;todo.service&#39;;</span><br><span class="line">import &#123; NgModule &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; FormsModule &#125; from &#39;@angular&#x2F;forms&#39;;</span><br><span class="line">import &#123; BrowserModule &#125; from &#39;@angular&#x2F;platform-browser&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; AppRoutingModule &#125; from &#39;.&#x2F;app-routing.module&#39;;</span><br><span class="line">import &#123; AppComponent &#125; from &#39;.&#x2F;app.component&#39;;</span><br><span class="line">import &#123; HttpClientModule &#125; from &#39;@angular&#x2F;common&#x2F;http&#39;;</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">	declarations: [</span><br><span class="line">		AppComponent</span><br><span class="line">	],</span><br><span class="line">	imports: [</span><br><span class="line">		BrowserModule,</span><br><span class="line">		AppRoutingModule,</span><br><span class="line">		FormsModule,</span><br><span class="line">		HttpClientModule</span><br><span class="line">	],</span><br><span class="line">	providers: [</span><br><span class="line">		TodoService</span><br><span class="line">	],</span><br><span class="line">	bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>接著調整 <code>app.component.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;section class&#x3D;&quot;todoapp&quot;&gt;</span><br><span class="line">	&lt;header class&#x3D;&quot;header&quot;&gt;</span><br><span class="line">		&lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;&#x2F;h1&gt;</span><br><span class="line">		&lt;input class&#x3D;&quot;new-todo&quot;</span><br><span class="line">			placeholder&#x3D;&quot;What needs to be done?&quot;</span><br><span class="line">			#todoInput</span><br><span class="line">			(keyup.enter)&#x3D;&quot;addTodo(todoInput)&quot;</span><br><span class="line">			autofocus&gt;</span><br><span class="line">	&lt;&#x2F;header&gt;</span><br><span class="line">	&lt;!-- This section should be hidden by default and shown when there are todos --&gt;</span><br><span class="line">	&lt;section class&#x3D;&quot;main&quot;&gt;</span><br><span class="line">		&lt;input id&#x3D;&quot;toggle-all&quot;</span><br><span class="line">			class&#x3D;&quot;toggle-all&quot;</span><br><span class="line">			type&#x3D;&quot;checkbox&quot;</span><br><span class="line">			(click)&#x3D;&quot;toggleClear()&quot;&gt;</span><br><span class="line">		&lt;label for&#x3D;&quot;toggle-all&quot;&gt;Mark all as complete&lt;&#x2F;label&gt;</span><br><span class="line">		&lt;ul class&#x3D;&quot;todo-list&quot; *ngFor&#x3D;&quot;let todo of filterTodos()&quot;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">			&lt;li [class]&#x3D;&quot;&#123; completed : todo.complete, editing : todo.editing &#125;&quot;&gt;</span><br><span class="line">				&lt;div class&#x3D;&quot;view&quot;&gt;</span><br><span class="line">					&lt;input class&#x3D;&quot;toggle&quot;</span><br><span class="line">						type&#x3D;&quot;checkbox&quot;</span><br><span class="line">						[checked]&#x3D;&quot;todo.complete&quot;</span><br><span class="line">						(change)&#x3D;&quot;updateTodo(todo)&quot;</span><br><span class="line">						&gt;</span><br><span class="line">					&lt;label</span><br><span class="line">						(dblclick)&#x3D;&quot;toggleEdit(todo)&quot;</span><br><span class="line">						(blur)&#x3D;&quot;lostEvent($event, todo)&quot;</span><br><span class="line">					&gt;&#123;&#123;todo.title&#125;&#125; (&#123;&#123;todo.id&#125;&#125;)&lt;&#x2F;label&gt;</span><br><span class="line">					&lt;button class&#x3D;&quot;destroy&quot; (click)&#x3D;&quot;deleteTodo(todo)&quot;&gt;&lt;&#x2F;button&gt;</span><br><span class="line">				&lt;&#x2F;div&gt;</span><br><span class="line">				&lt;input class&#x3D;&quot;edit&quot;</span><br><span class="line">					#itemInput</span><br><span class="line">					(mouseenter)&#x3D;&quot;itemInput.focus()&quot;</span><br><span class="line">					(blur)&#x3D;&quot;lostEvent($event, todo)&quot;</span><br><span class="line">					[(ngModel)]&#x3D;&quot;todo.title&quot;</span><br><span class="line">					&gt;</span><br><span class="line">			&lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">		&lt;&#x2F;ul&gt;</span><br><span class="line">	&lt;&#x2F;section&gt;</span><br><span class="line">	&lt;!-- This footer should be hidden by default and shown when there are todos --&gt;</span><br><span class="line">	&lt;!-- This footer should be hidden by default and shown when there are todos --&gt;</span><br><span class="line">	&lt;footer class&#x3D;&quot;footer&quot; *ngIf&#x3D;&quot;todos.length &gt; 0&quot;&gt;</span><br><span class="line">		&lt;!-- This should be &#96;0 items left&#96; by default --&gt;</span><br><span class="line">		&lt;span class&#x3D;&quot;todo-count&quot;&gt;&lt;strong&gt;&#123;&#123;getActiveCount()&#125;&#125;&lt;&#x2F;strong&gt; item left&lt;&#x2F;span&gt;</span><br><span class="line">		&lt;!-- Remove this if you don&#39;t implement routing --&gt;</span><br><span class="line">		&lt;ul class&#x3D;&quot;filters&quot;&gt;</span><br><span class="line">			&lt;li&gt;</span><br><span class="line">				&lt;a [ngClass]&#x3D;&quot;selectedAll ? &#39;selected&#39; : &#39;&#39;&quot;</span><br><span class="line">					#tagAll</span><br><span class="line">					(click)&#x3D;&quot;toggleSelected(tagAll)&quot;</span><br><span class="line">					href&#x3D;&quot;javascript:;&quot;&gt;All&lt;&#x2F;a&gt;</span><br><span class="line">			&lt;&#x2F;li&gt;</span><br><span class="line">			&lt;li&gt;</span><br><span class="line"></span><br><span class="line">				&lt;a [ngClass]&#x3D;&quot;selectedActive ? &#39;selected&#39; : &#39;&#39;&quot;</span><br><span class="line">					#tagActive</span><br><span class="line">					(click)&#x3D;&quot;toggleSelected(tagActive)&quot;</span><br><span class="line">					href&#x3D;&quot;javascript:;&quot;&gt;Active&lt;&#x2F;a&gt;</span><br><span class="line">			&lt;&#x2F;li&gt;</span><br><span class="line">			&lt;li&gt;</span><br><span class="line">				&lt;a [ngClass]&#x3D;&quot;selectedCompleted ? &#39;selected&#39; : &#39;&#39;&quot;</span><br><span class="line">					#tagCompleted</span><br><span class="line">					(click)&#x3D;&quot;toggleSelected(tagCompleted)&quot;</span><br><span class="line">					href&#x3D;&quot;javascript:;&quot;&gt;Completed&lt;&#x2F;a&gt;</span><br><span class="line">			&lt;&#x2F;li&gt;</span><br><span class="line">		&lt;&#x2F;ul&gt;</span><br><span class="line">		&lt;!-- Hidden if no completed items are left ↓ --&gt;</span><br><span class="line">		&lt;button</span><br><span class="line">			class&#x3D;&quot;clear-completed&quot;</span><br><span class="line">			*ngIf&#x3D;&quot;hasAnyCompleted()&quot;</span><br><span class="line">			(click)&#x3D;&quot;clearCompleted()&quot;&gt;Clear completed&lt;&#x2F;button&gt;</span><br><span class="line">	&lt;&#x2F;footer&gt;</span><br><span class="line">&lt;&#x2F;section&gt;</span><br><span class="line">&lt;footer class&#x3D;&quot;info&quot;&gt;</span><br><span class="line">	&lt;p&gt;Double-click to edit a todo&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;!-- Remove the below line ↓ --&gt;</span><br><span class="line">	&lt;p&gt;Template by &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;sindresorhus.com&quot;&gt;Sindre Sorhus&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;!-- Change this out with your name and url ↓ --&gt;</span><br><span class="line">	&lt;p&gt;Created by &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;todomvc.com&quot;&gt;you&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br><span class="line">	&lt;p&gt;Part of &lt;a href&#x3D;&quot;http:&#x2F;&#x2F;todomvc.com&quot;&gt;TodoMVC&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;footer&gt;</span><br></pre></td></tr></table></figure>

<p>最後調整 <code>app.component.ts</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">import &#123; TodoService &#125; from &#39;.&#x2F;todo.service&#39;;</span><br><span class="line">import &#123; Component, OnInit &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; Todo &#125; from &#39;.&#x2F;todo&#39;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">	selector: &#39;app-root&#39;,</span><br><span class="line">	templateUrl: &#39;.&#x2F;app.component.html&#39;,</span><br><span class="line">	styleUrls: [&#39;.&#x2F;app.component.css&#39;]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppComponent implements OnInit &#123;</span><br><span class="line">	public todoService: TodoService;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;All</span><br><span class="line">	&#x2F;&#x2F;Active</span><br><span class="line">	&#x2F;&#x2F;Complete</span><br><span class="line">	selected &#x3D; &#39;All&#39;</span><br><span class="line"></span><br><span class="line">	selectedAll &#x3D; true</span><br><span class="line">	selectedActive &#x3D; false</span><br><span class="line">	selectedCompleted &#x3D; false</span><br><span class="line"></span><br><span class="line">	todos: Todo[] &#x3D; []</span><br><span class="line">	title &#x3D; &#39;Lasai Todo&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	constructor(todoService: TodoService) &#123;</span><br><span class="line">		this.todoService &#x3D; todoService</span><br><span class="line">	&#125;</span><br><span class="line">	ngOnInit(): void &#123;</span><br><span class="line">		this.getTodos()</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	filterTodos(): Todo[] &#123;</span><br><span class="line">		if (this.selectedAll)</span><br><span class="line">			return this.todos</span><br><span class="line"></span><br><span class="line">		if (this.selectedActive)</span><br><span class="line">			return this.todos.filter(x &#x3D;&gt; x.complete &#x3D;&#x3D;&#x3D; false)</span><br><span class="line"></span><br><span class="line">		if (this.selectedCompleted)</span><br><span class="line">			return this.todos.filter(x &#x3D;&gt; x.complete &#x3D;&#x3D;&#x3D; true)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	getTodos() &#123;</span><br><span class="line">		this.todoService.getTodos()</span><br><span class="line">			.subscribe(x &#x3D;&gt; &#123;</span><br><span class="line">				this.todos &#x3D; x</span><br><span class="line">				console.log(x)</span><br><span class="line">			&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	deleteTodo(todo: Todo) &#123;</span><br><span class="line">		this.todoService.deleteTodo(todo.id).subscribe(resp &#x3D;&gt; &#123;</span><br><span class="line">			console.log(&#39;server delete todo&#39; + resp)</span><br><span class="line">			this.todos &#x3D; this.todos.filter(x &#x3D;&gt; x.id !&#x3D; resp.id);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	addTodo(todoInput: HTMLInputElement): void &#123;</span><br><span class="line">		if (todoInput.value.trim().length &gt; 0) &#123;</span><br><span class="line">			let todo &#x3D; new Todo(0, todoInput.value, false, false)</span><br><span class="line">			this.todoService.addTodo(todo).subscribe( resp&#x3D;&gt;&#123;</span><br><span class="line">				this.todos.push(resp)</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;清空 input 內的文字</span><br><span class="line">		todoInput.value &#x3D; &#39;&#39;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	updateTodo(todo : Todo) : void&#123;</span><br><span class="line">		todo.complete &#x3D; !todo.complete</span><br><span class="line">		this.todoService.updateTodo(todo).subscribe(resp &#x3D;&gt;&#123;</span><br><span class="line">			console.log(&#39;server update todo&#39; + resp)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	getActiveCount() &#123;</span><br><span class="line">		return this.todos.filter(x &#x3D;&gt; x.complete &#x3D;&#x3D;&#x3D; false).length</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	hasAnyCompleted() &#123;</span><br><span class="line">		return this.todos.some(x &#x3D;&gt; x.complete &#x3D;&#x3D; true)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	clearCompleted() &#123;</span><br><span class="line">		this.todoService.clearCompleted().subscribe(resp&#x3D;&gt;&#123;</span><br><span class="line">			this.todos &#x3D; resp</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	lostEvent(event, todo: Todo) &#123;</span><br><span class="line">		console.log(event)</span><br><span class="line"></span><br><span class="line">		todo.editing &#x3D; false</span><br><span class="line">		this.todoService.updateTodo(todo).subscribe(resp &#x3D;&gt;&#123;</span><br><span class="line">			console.log(&#39;server update todo&#39; + resp)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	toggleEdit(todo: Todo) &#123;</span><br><span class="line">		console.log(todo)</span><br><span class="line">		if (todo.editing &#x3D;&#x3D;&#x3D; false) &#123;</span><br><span class="line">			todo.editing &#x3D; true</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	toggleClear() &#123;</span><br><span class="line">		switch (this.selected) &#123;</span><br><span class="line">			case &#39;All&#39;:</span><br><span class="line">				&#x2F;&#x2F;每一項都完成的話標示全部未完成</span><br><span class="line">				let everyComplete &#x3D; this.todos.every(x &#x3D;&gt; x.complete &#x3D;&#x3D; true)</span><br><span class="line">				if (everyComplete) &#123;</span><br><span class="line">					&#x2F;&#x2F; this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; false)</span><br><span class="line">					this.todoService.clearCompleted().subscribe(resp&#x3D;&gt;&#123;</span><br><span class="line">						console.log(resp)</span><br><span class="line">						this.todos &#x3D; resp</span><br><span class="line">					&#125;)</span><br><span class="line">					return</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				&#x2F;&#x2F;每一個項目都還沒完成的話標示全部已完成</span><br><span class="line">				let everyNotComplete &#x3D; this.todos.every(x &#x3D;&gt; x.complete &#x3D;&#x3D; false)</span><br><span class="line">				if (everyNotComplete) &#123;</span><br><span class="line">					&#x2F;&#x2F; this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; true)</span><br><span class="line">					this.todoService.makeCompleted().subscribe(resp&#x3D;&gt;&#123;</span><br><span class="line">						console.log(resp)</span><br><span class="line">						this.todos &#x3D; resp</span><br><span class="line">					&#125;)</span><br><span class="line">					return</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				&#x2F;&#x2F;有任何一個已經完成的話標示全部已完成</span><br><span class="line">				let anyCompleted &#x3D; this.todos.some(x &#x3D;&gt; x.complete &#x3D;&#x3D; true)</span><br><span class="line">				if (anyCompleted) &#123;</span><br><span class="line">					&#x2F;&#x2F; this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; true)</span><br><span class="line">					this.todoService.makeCompleted().subscribe(resp&#x3D;&gt;&#123;</span><br><span class="line">						console.log(resp)</span><br><span class="line">						this.todos &#x3D; resp</span><br><span class="line">					&#125;)</span><br><span class="line">					return</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				break;</span><br><span class="line">			case &#39;Active&#39;:</span><br><span class="line">				&#x2F;&#x2F; this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; true)</span><br><span class="line">				this.todoService.makeCompleted().subscribe(resp&#x3D;&gt;&#123;</span><br><span class="line">					console.log(resp)</span><br><span class="line">					this.todos &#x3D; resp</span><br><span class="line">				&#125;)</span><br><span class="line">				break;</span><br><span class="line">			case &#39;Completed&#39;:</span><br><span class="line">				&#x2F;&#x2F; this.todos.forEach(x &#x3D;&gt; x.complete &#x3D; false)</span><br><span class="line">				this.todoService.clearCompleted().subscribe(resp&#x3D;&gt;&#123;</span><br><span class="line">					console.log(resp)</span><br><span class="line">					this.todos &#x3D; resp</span><br><span class="line">				&#125;)</span><br><span class="line">				break;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	toggleSelected(tag) &#123;</span><br><span class="line">		console.log(tag.text)</span><br><span class="line">		this.selected &#x3D; tag.text</span><br><span class="line">		switch (this.selected) &#123;</span><br><span class="line">			case &#39;All&#39;:</span><br><span class="line">				this.selectedAll &#x3D; true</span><br><span class="line">				this.selectedActive &#x3D; false</span><br><span class="line">				this.selectedCompleted &#x3D; false</span><br><span class="line">				break;</span><br><span class="line">			case &#39;Active&#39;:</span><br><span class="line">				this.selectedAll &#x3D; false</span><br><span class="line">				this.selectedActive &#x3D; true</span><br><span class="line">				this.selectedCompleted &#x3D; false</span><br><span class="line">				break;</span><br><span class="line">			case &#39;Completed&#39;:</span><br><span class="line">				this.selectedAll &#x3D; false</span><br><span class="line">				this.selectedActive &#x3D; false</span><br><span class="line">				this.selectedCompleted &#x3D; true</span><br><span class="line">				break;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="升級-angularjs-到-angular-常見問題"><a href="#升級-angularjs-到-angular-常見問題" class="headerlink" title="升級 angularjs 到 angular 常見問題"></a>升級 angularjs 到 angular 常見問題</h3><p>因為舊版是用 <code>asp.net mvc + angularjs</code> 這個組合去做的 , 順手筆記下遇到的問題</p>
<h4 id="搬遷步驟"><a href="#搬遷步驟" class="headerlink" title="搬遷步驟"></a>搬遷步驟</h4><p>利用這個網站 <a href="https://csharptotypescript.azurewebsites.net/" target="_blank" rel="noopener">c# to typescript</a> 轉換物件為 typescript 的 interface or class</p>
<p>接著建立 service , 並且注入 <code>HttpClient</code> , 記得要在 <code>app.module.ts</code> 引用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; HttpClientModule &#125; from &#39;@angular&#x2F;common&#x2F;http&#39;;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">imports: [</span><br><span class="line">	BrowserModule.withServerTransition(&#123; appId: &#39;ng-cli-universal&#39; &#125;),</span><br><span class="line">	HttpClientModule,</span><br><span class="line">	FormsModule,</span><br><span class="line">	RouterModule.forRoot([</span><br><span class="line">		&#123; path: &#39;&#39;, component: HomeComponent, pathMatch: &#39;full&#39; &#125;,</span><br><span class="line">		&#123; path: &#39;counter&#39;, component: CounterComponent &#125;,</span><br><span class="line">		&#123; path: &#39;fetch-data&#39;, component: FetchDataComponent &#125;,</span><br><span class="line">		&#123; path: &#39;data&#39;, component: DataComponent &#125;,</span><br><span class="line">	])</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>接著包裝 service 類似下面這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">import &#123; HttpClient &#125; from &#39;@angular&#x2F;common&#x2F;http&#39;;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">@Injectable(&#123;</span><br><span class="line">	providedIn: &#39;root&#39;</span><br><span class="line">&#125;)</span><br><span class="line">export class DataService &#123;</span><br><span class="line">	constructor( private httpClient : HttpClient) &#123;&#125;</span><br><span class="line"></span><br><span class="line">	query(id : string) : Observable&lt;Data[]&gt; &#123;</span><br><span class="line">		return this.httpClient.get&lt;Data[]&gt;(&#96;&#x2F;api&#x2F;FindData&#x2F;$&#123;id&#125;&#96;)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>接著在 <code>component</code> 撈資料看看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">items : Data[] &#x3D; []</span><br><span class="line"></span><br><span class="line">query(id: string) &#123;</span><br><span class="line">	this.data.query(ppid).subscribe(x &#x3D;&gt; &#123;</span><br><span class="line">		this.items &#x3D; x</span><br><span class="line">		console.log(x)</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最後將 angularjs <code>ng-repeat</code> 改用 <code>ng-container</code> 包起來關注邏輯類似下面這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;list-group mt-3&quot;&gt;</span><br><span class="line">	&lt;ng-container *ngFor&#x3D;&quot;let item of items&quot;&gt;</span><br><span class="line">		&lt;a href&#x3D;&quot;javascript:;&quot;</span><br><span class="line">			class&#x3D;&quot;list-group-item list-group-item-action flex-column align-items-start&quot;&gt;</span><br><span class="line">			&lt;div class&#x3D;&quot;d-flex w-100 justify-content-between&quot;&gt;</span><br><span class="line">				&lt;h5 class&#x3D;&quot;mb-1&quot;&gt;&#123;&#123;item.oId&#125;&#125;&lt;&#x2F;h5&gt;</span><br><span class="line">				&lt;small&gt;&#123;&#123;item.name&#125;&#125;&lt;&#x2F;small&gt;</span><br><span class="line">			&lt;&#x2F;div&gt;</span><br><span class="line">			&lt;p class&#x3D;&quot;mb-1&quot;&gt;&#123;&#123;item.desc&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">		&lt;&#x2F;a&gt;</span><br><span class="line">	&lt;&#x2F;ng-container&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>這種包資料的都搞定後可以逐步把其他 angularjs 上面的 function 也搬進來 , 先把 <code>$scope</code> 移除<br>接著把 <code>$score.search = function()</code> 改成 <code>search() {}</code> , 最後把 function 內的 <code>$scope</code> 改成 <code>this.xxx</code> 大致上就救活一個 function 了<br><code>angularjs</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$scope.search &#x3D; function () &#123;</span><br><span class="line">	$scope.findById($scope.id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>angular</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search()&#123;</span><br><span class="line">	this.findById(this.id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最後檢查 <code>ng-</code> 開頭的功能 , 慢慢將改成 angular 對應的語法即可</p>
<h4 id="fontawesome-5"><a href="#fontawesome-5" class="headerlink" title="fontawesome 5"></a>fontawesome 5</h4><p>安裝 fontawesome 5</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @fortawesome&#x2F;fontawesome-free@5.1.0-9</span><br></pre></td></tr></table></figure>

<p>在 <code>angular.json</code> 加入引用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;styles&quot;: [</span><br><span class="line">	&quot;node_modules&#x2F;bootstrap&#x2F;dist&#x2F;css&#x2F;bootstrap.min.css&quot;,</span><br><span class="line">	&quot;node_modules&#x2F;@fortawesome&#x2F;fontawesome-free&#x2F;css&#x2F;all.css&quot;,</span><br><span class="line">	&quot;src&#x2F;styles.css&quot;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>另外還有看到這個<a href="https://www.npmjs.com/package/@fortawesome/angular-fontawesome" target="_blank" rel="noopener">官方元件</a> 有空也可以玩看看</p>
<h4 id="ModuleMapLoaderModule-Error"><a href="#ModuleMapLoaderModule-Error" class="headerlink" title="ModuleMapLoaderModule Error"></a>ModuleMapLoaderModule Error</h4><p>註解 <code>app.server.module.ts</code> ModuleMapLoaderModule 的部分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; NgModule &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; ServerModule &#125; from &#39;@angular&#x2F;platform-server&#39;;</span><br><span class="line">&#x2F;&#x2F; import &#123; ModuleMapLoaderModule &#125; from &#39;@nguniversal&#x2F;module-map-ngfactory-loader&#39;;</span><br><span class="line">import &#123; AppComponent &#125; from &#39;.&#x2F;app.component&#39;;</span><br><span class="line">import &#123; AppModule &#125; from &#39;.&#x2F;app.module&#39;;</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">	imports: [</span><br><span class="line">		AppModule,</span><br><span class="line">		ServerModule,</span><br><span class="line">		&#x2F;&#x2F; ModuleMapLoaderModule</span><br><span class="line">	],</span><br><span class="line">	bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppServerModule &#123; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="proxy-asp-net-mvc-web-api"><a href="#proxy-asp-net-mvc-web-api" class="headerlink" title="proxy asp.net mvc web api"></a>proxy asp.net mvc web api</h4><p>修改 <code>proxy.conf.js</code> 加入你的舊版 api 站台</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const &#123; env &#125; &#x3D; require(&#39;process&#39;);</span><br><span class="line"></span><br><span class="line">const target &#x3D; env.ASPNETCORE_HTTPS_PORT ? &#96;https:&#x2F;&#x2F;localhost:$&#123;env.ASPNETCORE_HTTPS_PORT&#125;&#96; :</span><br><span class="line">	env.ASPNETCORE_URLS ? env.ASPNETCORE_URLS.split(&#39;;&#39;)[0] : &#39;http:&#x2F;&#x2F;localhost:9287&#39;;</span><br><span class="line"></span><br><span class="line">const PROXY_CONFIG &#x3D; [</span><br><span class="line">	&#123;</span><br><span class="line">		context: [</span><br><span class="line">			&quot;&#x2F;weatherforecast&quot;,</span><br><span class="line">		],</span><br><span class="line">		target: target,</span><br><span class="line">		secure: false</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		context: &quot;&#x2F;qq&quot;,</span><br><span class="line">		target: &quot;http:&#x2F;&#x2F;localhost:1234&quot;,</span><br><span class="line">		secure: false,</span><br><span class="line">		changeOrigin: true</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; PROXY_CONFIG;</span><br></pre></td></tr></table></figure>




<h4 id="解決-keyvalue-問題"><a href="#解決-keyvalue-問題" class="headerlink" title="解決 keyvalue 問題"></a>解決 keyvalue 問題</h4><p>我有個 case 是動態撈出物件 , 所以 table 的 header 會動態改變 , 舊版 <code>angularjs</code> 大概長這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;table-responsive mt-2&quot;&gt;</span><br><span class="line">    &lt;table class&#x3D;&quot;table table-sm table-bordered table-hover&quot;&gt;</span><br><span class="line">        &lt;thead class&#x3D;&quot;table-success&quot;&gt;</span><br><span class="line">            &lt;tr ng-repeat&#x3D;&quot;item in filterTableHeader()&quot;&gt;</span><br><span class="line">                &lt;th scope&#x3D;&quot;col&quot; ng-repeat&#x3D;&quot;(key , value) in item&quot;&gt;&#123;&#123;key&#125;&#125;&lt;&#x2F;th&gt;</span><br><span class="line">            &lt;&#x2F;tr&gt;</span><br><span class="line">        &lt;&#x2F;thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">            &lt;tr ng-repeat&#x3D;&quot;item in items&quot;&gt;</span><br><span class="line">                &lt;td ng-repeat&#x3D;&quot;(key , value) in item&quot;</span><br><span class="line">                    style&#x3D;&quot;white-space: nowrap;&quot;</span><br><span class="line">                    &gt;&#123;&#123;value&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">            &lt;&#x2F;tr&gt;</span><br><span class="line">        &lt;&#x2F;tbody&gt;</span><br><span class="line">    &lt;&#x2F;table&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>轉移到新版的話要改成以下這樣 , 關鍵點就是 pipe <code>keyvalue</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;table-responsive mt-2&quot;&gt;</span><br><span class="line">	&lt;table class&#x3D;&quot;table table-sm table-bordered table-hover&quot;&gt;</span><br><span class="line">		&lt;thead class&#x3D;&quot;table-success&quot;&gt;</span><br><span class="line">			&lt;ng-container *ngFor&#x3D;&quot;let yourObject of filterTableHeader()&quot;&gt;</span><br><span class="line">				&lt;tr&gt;</span><br><span class="line">					&lt;ng-container *ngFor&#x3D;&quot;let item of yourObject | keyvalue: unsorted&quot;&gt;</span><br><span class="line">						&lt;th scope&#x3D;&quot;col&quot;&gt;</span><br><span class="line">							&#123;&#123;item.key&#125;&#125;</span><br><span class="line">						&lt;&#x2F;th&gt;</span><br><span class="line">					&lt;&#x2F;ng-container&gt;</span><br><span class="line">				&lt;&#x2F;tr&gt;</span><br><span class="line">			&lt;&#x2F;ng-container&gt;</span><br><span class="line">		&lt;&#x2F;thead&gt;</span><br><span class="line">		&lt;tbody&gt;</span><br><span class="line">			&lt;ng-container *ngFor&#x3D;&quot;let yourObject of yourObjects&quot;&gt;</span><br><span class="line">				&lt;tr&gt;</span><br><span class="line">					&lt;ng-container *ngFor&#x3D;&quot;let item of yourObject | keyvalue: unsorted&quot;&gt;</span><br><span class="line">						&lt;td style&#x3D;&quot;white-space: nowrap;&quot;&gt;&#123;&#123;item.value&#125;&#125;&lt;&#x2F;td&gt;</span><br><span class="line">					&lt;&#x2F;ng-container&gt;</span><br><span class="line">				&lt;&#x2F;tr&gt;</span><br><span class="line">			&lt;&#x2F;ng-container&gt;</span><br><span class="line"></span><br><span class="line">		&lt;&#x2F;tbody&gt;</span><br><span class="line">	&lt;&#x2F;table&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<p>不過他會從字母的 a 排到 z , 所以要增加一個 function unsorted 在你的 component 裡面 , 可以 <a href="https://stackoverflow.com/questions/52793944/angular-keyvalue-pipe-sort-properties-iterate-in-order" target="_blank" rel="noopener">參考這篇</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unsorted(a: any, b: any): number &#123; return 0; &#125;</span><br></pre></td></tr></table></figure>


<h4 id="解決-ng-keypress"><a href="#解決-ng-keypress" class="headerlink" title="解決 ng-keypress"></a>解決 ng-keypress</h4><p>舊版 <code>angularjs</code> 大概長這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng-keypress&#x3D;&quot;($event.which &#x3D;&#x3D;&#x3D; 13) ? search() : 0&quot;</span><br></pre></td></tr></table></figure>

<p>新版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(keyup.enter)&#x3D;&quot;search()&quot;</span><br></pre></td></tr></table></figure>


<h4 id="bootstrap4-input-group-掛掉"><a href="#bootstrap4-input-group-掛掉" class="headerlink" title="bootstrap4 input-group 掛掉"></a>bootstrap4 input-group 掛掉</h4><p>舊版 bootstrap4 <code>input-group-append</code> 有多這一層 , 在 bootstrap5 需要把它移除 , vscode 可以利用 <code>ctrl + shift + k</code> 快速解決</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;input-group&quot;&gt;</span><br><span class="line">	&lt;input name&#x3D;&quot;&quot;</span><br><span class="line">		type&#x3D;&quot;text&quot;</span><br><span class="line">		class&#x3D;&quot;form-control&quot;</span><br><span class="line">		placeholder&#x3D;&quot;&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">	&lt;div class&#x3D;&quot;input-group-append&quot;&gt;</span><br><span class="line">	</span><br><span class="line">		&lt;!--關鍵字搜尋--&gt;</span><br><span class="line">		&lt;button class&#x3D;&quot;btn btn-outline-secondary active&quot; type&#x3D;&quot;button&quot;&gt;描述&lt;&#x2F;button&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!--清除按鈕--&gt;</span><br><span class="line">		&lt;button class&#x3D;&quot;btn btn-outline-secondary&quot;</span><br><span class="line">			type&#x3D;&quot;button&quot;</span><br><span class="line">			ng-click&#x3D;&quot;clearCodeDesc()&quot;&gt;</span><br><span class="line">			X</span><br><span class="line">		&lt;&#x2F;button&gt;</span><br><span class="line">	&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>


<h4 id="修正-angularjs-filter-為-angular-pipe"><a href="#修正-angularjs-filter-為-angular-pipe" class="headerlink" title="修正 angularjs filter 為 angular pipe"></a>修正 angularjs filter 為 angular pipe</h4><p>首先在 <code>angularjs</code> 上 , 我有個 filter 大概長這樣 , 當他是 <code>DESC</code> 則過濾 <code>DESC</code> 內容 , 如果是 <code>CODE</code> 則過濾 <code>CODE</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$scope.filterCodeDesc &#x3D; function (item) &#123;</span><br><span class="line">	if ($scope.searchCodeDesc &#x3D;&#x3D;&#x3D; &#39;&#39;) &#123;</span><br><span class="line">		return item;</span><br><span class="line">	&#125; </span><br><span class="line"></span><br><span class="line">	if ($scope.searchBy &#x3D;&#x3D;&#x3D; &#39;DESC&#39;) &#123;</span><br><span class="line">		&#x2F;&#x2F;不分大小寫</span><br><span class="line">		&#x2F;&#x2F;類 sql like 搜尋</span><br><span class="line">		return item.DESC.match(new RegExp(&quot;.*&quot; + $scope.searchCodeDesc + &quot;.*&quot;, &quot;i&quot;))</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return item.CODE.match(new RegExp(&quot;.*&quot; + $scope.searchCodeDesc + &quot;.*&quot;, &quot;i&quot;))</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>html 大概長這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng-repeat&#x3D;&quot;Code in Codes  | filter:filterCodeDesc&quot;</span><br></pre></td></tr></table></figure>

<p>新版 angular 好像沒有 filter , 不過有 pipe 所以這類的 code 可以改這樣 , 注意他的重點要改用 javascript 原生的 filter 去篩選條件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Pipe, PipeTransform &#125; from &#39;@angular&#x2F;core&#39;;</span><br><span class="line">import &#123; Code &#125; from &#39;..&#x2F;models&#x2F;code&#39;;</span><br><span class="line"></span><br><span class="line">@Pipe(&#123;</span><br><span class="line">	name: &#39;filterCodeDesc&#39;</span><br><span class="line">&#125;)</span><br><span class="line">export class CodeDescPipe implements PipeTransform &#123;</span><br><span class="line"></span><br><span class="line">	transform(codes: Code[], searchBy: string, searchCodeDesc: string): Code[] &#123;</span><br><span class="line"></span><br><span class="line">		if (searchCodeDesc &#x3D;&#x3D;&#x3D; &#39;&#39;) &#123;</span><br><span class="line">			return codes;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if (searchBy &#x3D;&#x3D;&#x3D; &#39;DESC&#39;) &#123;</span><br><span class="line">			&#x2F;&#x2F;不分大小寫</span><br><span class="line">			&#x2F;&#x2F;類 sql like 搜尋</span><br><span class="line">			return codes.filter(x &#x3D;&gt; x.DESC.match(new RegExp(&quot;.*&quot; + searchCodeDesc + &quot;.*&quot;, &quot;i&quot;)))</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			return codes.filter(x &#x3D;&gt; x.CODE.match(new RegExp(&quot;.*&quot; + searchCodeDesc + &quot;.*&quot;, &quot;i&quot;)))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>html 長這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ng-container *ngFor&#x3D;&quot;let code of Codes | filterCodeDesc:searchBy:searchCodeDesc&quot;&gt;</span><br></pre></td></tr></table></figure>


<h4 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h4><p>以前 angularjs 有個 <code>angular.copy</code> 的 function 可以使用<br>現在要改這樣用展開運算子 , 參考<a href="https://stackoverflow.com/questions/39506619/angular2-how-to-copy-object-into-another-object" target="_blank" rel="noopener">這篇</a><br>沒想到真正實戰展開運算子是在 typescript 反而不是 python XD</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let copy &#x3D; &#123;...resp.data&#125;;</span><br><span class="line">this.defectiveHandleOriginal &#x3D; copy</span><br></pre></td></tr></table></figure>


<h4 id="常見對照"><a href="#常見對照" class="headerlink" title="常見對照"></a>常見對照</h4><p><code>ng-class</code> =&gt; <code>ngClass</code><br><code>ng-style</code> =&gt; <code>ngStyle</code><br><code>ng-repeat</code> =&gt; <code>*ngFor</code><br><code>ng-model</code> =&gt; <code>[(ngModel)]</code><br><code>ng-click</code> =&gt; <code>(click)</code></p>
<h3 id="focus"><a href="#focus" class="headerlink" title="focus"></a>focus</h3><p>參考這篇 <a href="https://netbasal.com/autofocus-that-works-anytime-in-angular-apps-68cb89a3f057" target="_blank" rel="noopener">https://netbasal.com/autofocus-that-works-anytime-in-angular-apps-68cb89a3f057</a><br>注意一開始建立 directive 的 selector 不一樣 , 會叫做 <code>appAutofocus</code> , 原生 html 其實就有 <code>autofocus</code> 這個 attribute , 不過直接插上去好像是不會 work</p>
<h3 id="多語系"><a href="#多語系" class="headerlink" title="多語系"></a>多語系</h3><p>可以參考這個人寫的 <a href="https://medium.com/allen%E7%9A%84%E6%8A%80%E8%A1%93%E7%AD%86%E8%A8%98/angular-ngx-translate-%E7%AD%86%E8%A8%98-84b8812419ab" target="_blank" rel="noopener">https://medium.com/allen%E7%9A%84%E6%8A%80%E8%A1%93%E7%AD%86%E8%A8%98/angular-ngx-translate-%E7%AD%86%E8%A8%98-84b8812419ab</a></p>
<p>因為 angular 內建多語系需要針對每個語言去編譯 , 非常麻煩 , 所以用 ngx-translate 這個套件在 <code>assets\i18n</code> 底下有個語言的 json 設定檔</p>
<p>前端只要這樣寫即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; &#39;Menu.LanguageList.Chinese&#39; | translate &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>另外如果要用程式去控制的話 , 例如跳 modal alert 等操作只要這樣寫即可</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> msg = <span class="keyword">this</span>.translate.instant(<span class="string">'Alert.AddProduct'</span>)</span><br><span class="line">alert(msg)</span><br></pre></td></tr></table></figure>

<h3 id="Breadcrumb-麵包屑"><a href="#Breadcrumb-麵包屑" class="headerlink" title="Breadcrumb 麵包屑"></a>Breadcrumb 麵包屑</h3><p>參考這篇 <a href="https://marco.dev/angular-breadcrumb" target="_blank" rel="noopener">https://marco.dev/angular-breadcrumb</a><br>唯一的問題就是老外寫 <code>/</code> 在 subsite 會壞掉 , 應該改用 <code>./</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Add an element for the current route part</span><br><span class="line">if (route.data[&#39;breadcrumb&#39;]) &#123;</span><br><span class="line">  console.log(&#39;breadcrumb&#39; , route.data[&#39;breadcrumb&#39;])</span><br><span class="line">  console.log(&#39;routeUrl&#39; , routeUrl)</span><br><span class="line">  const breadcrumb &#x3D; &#123;</span><br><span class="line">    label: this.getLabel(route.data),</span><br><span class="line">    url: &#39;.&#x2F;&#39; + routeUrl.join(&#39;&#x2F;&#39;)</span><br><span class="line">  &#125;;</span><br><span class="line">  breadcrumbs.push(breadcrumb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="靜態資源路徑問題"><a href="#靜態資源路徑問題" class="headerlink" title="靜態資源路徑問題"></a>靜態資源路徑問題</h3><p>這是老生常談 , 我待過的地方 , 十有八九都會把 IIS 80 port 底下又掛一堆子網站<br>每次只要一遇到這個簡直就跟地獄沒兩樣 , 常常造成爭吵<br>起初我在 css background 的 url 是寫成 <code>/assets</code> 這樣會直接吃到 root 一上就爆炸<br>後來改用 <code>../../assets</code>  變成相對路徑 , 不過這樣寫會造成 build 時多出不必要的圖片檔案</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background: url('../../assets/images/logo.png') no-repeat center;</span><br></pre></td></tr></table></figure>

<p>可以參考這篇使用更好的做法<br><a href="https://infinum.com/handbook/frontend/angular/angular-guidelines-and-best-practices/assets-and-caching" target="_blank" rel="noopener">https://infinum.com/handbook/frontend/angular/angular-guidelines-and-best-practices/assets-and-caching</a></p>
<table><thead>
<tr>
<th>Use case</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>HTML / images</td>
<td><code>&lt;img src="./assets/…"&gt;</code></td>
</tr>
<tr>
<td>XHR / fetch</td>
<td><code>http.get('./assets/…")</code></td>
</tr>
<tr>
<td>CSS <code>url()</code></td>
<td><code>url("^assets/…")</code></td>
</tr>
</tbody></table>

<p>所以最後改用這樣寫 , 可以完全保證 subsite 抓到正確路徑 , 並且也不會產生額外圖片</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background: url('^assets/images/logo.png') no-repeat center;</span><br></pre></td></tr></table></figure>

<h3 id="Loading-頁面"><a href="#Loading-頁面" class="headerlink" title="Loading 頁面"></a>Loading 頁面</h3><p>應該就是無腦抄這篇 , 然後改個 css 應該就可以收工<br><a href="https://danielk.tech/home/angular-how-to-add-a-loading-spinner" target="_blank" rel="noopener">https://danielk.tech/home/angular-how-to-add-a-loading-spinner</a></p>
<h3 id="佈署到-iis"><a href="#佈署到-iis" class="headerlink" title="佈署到 iis"></a>佈署到 iis</h3><p>主要跟著這兩篇設定<br><a href="https://blog.poychang.net/deploy-angular-to-iis-virtual-directory/" target="_blank" rel="noopener">https://blog.poychang.net/deploy-angular-to-iis-virtual-directory/</a><br><a href="https://blog.miniasp.com/post/2017/01/17/Angular-2-deploy-on-IIS" target="_blank" rel="noopener">https://blog.miniasp.com/post/2017/01/17/Angular-2-deploy-on-IIS</a><br><code>務必</code> 要先安裝<a href="https://www.iis.net/downloads/microsoft/url-rewrite" target="_blank" rel="noopener">url rewrite</a><br>然後順便新增 <code>web.config</code> 在 <code>src</code> 底下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;system.webServer&gt;</span><br><span class="line">    &lt;rewrite&gt;</span><br><span class="line">      &lt;rules&gt;</span><br><span class="line">        &lt;rule name&#x3D;&quot;SPA&quot; stopProcessing&#x3D;&quot;true&quot;&gt;</span><br><span class="line">          &lt;match url&#x3D;&quot;.*&quot; &#x2F;&gt;</span><br><span class="line">          &lt;action type&#x3D;&quot;Rewrite&quot; url&#x3D;&quot;&#x2F;&quot; &#x2F;&gt;</span><br><span class="line">          &lt;conditions&gt;</span><br><span class="line">            &lt;add input&#x3D;&quot;&#123;REQUEST_FILENAME&#125;&quot; matchType&#x3D;&quot;IsFile&quot; negate&#x3D;&quot;true&quot; &#x2F;&gt;</span><br><span class="line">          &lt;&#x2F;conditions&gt;</span><br><span class="line">        &lt;&#x2F;rule&gt;</span><br><span class="line">      &lt;&#x2F;rules&gt;</span><br><span class="line">    &lt;&#x2F;rewrite&gt;</span><br><span class="line">  &lt;&#x2F;system.webServer&gt;</span><br><span class="line">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>

<p>接著在 <code>angular.json</code> 的 <code>assets</code> 調整設定這樣 <code>ng build --configuration=pord</code> 才會包含 <code>web.config</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;assets&quot;: [</span><br><span class="line">  &quot;src&#x2F;favicon.ico&quot;,</span><br><span class="line">  &quot;src&#x2F;assets&quot;,</span><br><span class="line">  &quot;src&#x2F;silent-renew.html&quot;,</span><br><span class="line">  &quot;src&#x2F;web.config&quot;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h3 id="升級"><a href="#升級" class="headerlink" title="升級"></a>升級</h3><h4 id="升級-nodejs"><a href="#升級-nodejs" class="headerlink" title="升級 nodejs"></a>升級 nodejs</h4><p>Angular 16 需要 nodejs 18<br>在 windows 上直接回<a href="https://nodejs.org/en/download" target="_blank" rel="noopener">官網下載</a> nodejs 重新安裝他就會升級</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">v18.17.1</span><br></pre></td></tr></table></figure>

<p>升級後可能要清除 npm cache 然後安裝套件看看噴什麼錯誤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean --force</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h4 id="升級-angular-cli"><a href="#升級-angular-cli" class="headerlink" title="升級 angular cli"></a>升級 angular cli</h4><p><a href="https://update.angular.io/?v=14.0-16.0" target="_blank" rel="noopener">https://update.angular.io/?v=14.0-16.0</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">🌹 ng version</span><br><span class="line"></span><br><span class="line">     _                      _                 ____ _     ___</span><br><span class="line">    &#x2F; \   _ __   __ _ _   _| | __ _ _ __     &#x2F; ___| |   |_ _|</span><br><span class="line">   &#x2F; △ \ | &#39;_ \ &#x2F; _&#96; | | | | |&#x2F; _&#96; | &#39;__|   | |   | |    | |</span><br><span class="line">  &#x2F; ___ \| | | | (_| | |_| | | (_| | |      | |___| |___ | |</span><br><span class="line"> &#x2F;_&#x2F;   \_\_| |_|\__, |\__,_|_|\__,_|_|       \____|_____|___|</span><br><span class="line">                |___&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Angular CLI: 15.2.8</span><br><span class="line">Node: 18.17.1</span><br><span class="line">Package Manager: npm 8.19.2</span><br><span class="line">OS: win32 x64</span><br><span class="line"></span><br><span class="line">Angular: 15.2.9</span><br><span class="line">... animations, cdk, common, compiler, compiler-cli, core, forms</span><br><span class="line">... platform-browser, platform-browser-dynamic, router</span><br><span class="line"></span><br><span class="line">Package                         Version</span><br><span class="line">---------------------------------------------------------</span><br><span class="line">@angular-devkit&#x2F;architect       0.1502.8</span><br><span class="line">@angular-devkit&#x2F;build-angular   15.2.8</span><br><span class="line">@angular-devkit&#x2F;core            15.2.8</span><br><span class="line">@angular-devkit&#x2F;schematics      15.2.8</span><br><span class="line">@angular&#x2F;cli                    15.2.8</span><br><span class="line">@schematics&#x2F;angular             15.2.8</span><br><span class="line">rxjs                            7.8.1</span><br><span class="line">typescript                      4.9.5</span><br></pre></td></tr></table></figure>

<p>執行 ng update 指令看要更新那些 , 更新前先 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">🌹 ng update</span><br><span class="line">Using package manager: npm</span><br><span class="line">Collecting installed dependencies...</span><br><span class="line">Found 32 dependencies.</span><br><span class="line">    We analyzed your package.json, there are some packages to update:</span><br><span class="line"></span><br><span class="line">      Name                               Version                  Command to update</span><br><span class="line">     --------------------------------------------------------------------------------</span><br><span class="line">      @angular&#x2F;cdk                       15.2.9 -&gt; 16.2.1         ng update @angular&#x2F;cdk</span><br><span class="line">      @angular&#x2F;cli                       15.2.9 -&gt; 16.2.0         ng update @angular&#x2F;cli</span><br><span class="line">      @angular&#x2F;core                      15.2.9 -&gt; 16.2.1         ng update @angular&#x2F;core</span><br><span class="line"></span><br><span class="line">    There might be additional packages which don&#39;t provide &#39;ng update&#39; capabilities that are outdated.</span><br><span class="line">    You can update the additional packages by running the update command of your package manager.</span><br></pre></td></tr></table></figure>

<p>依序執行指令更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ng update @angular&#x2F;cdk</span><br><span class="line">ng update @angular&#x2F;cli</span><br><span class="line">ng update @angular&#x2F;core</span><br></pre></td></tr></table></figure>

<h4 id="安裝-npm-check-updates"><a href="#安裝-npm-check-updates" class="headerlink" title="安裝 npm-check-updates"></a>安裝 npm-check-updates</h4><p><a href="https://www.freecodecamp.org/news/how-to-update-npm-dependencies/" target="_blank" rel="noopener">https://www.freecodecamp.org/news/how-to-update-npm-dependencies/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npm-check-updates</span><br></pre></td></tr></table></figure>

<p>檢查需要更新的項目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ncu</span><br><span class="line">@ng-bootstrap&#x2F;ng-bootstrap   ^14.1.1  →  ^15.1.1</span><br><span class="line">@ngx-translate&#x2F;core          ^14.0.0  →  ^15.0.0</span><br><span class="line">@ngx-translate&#x2F;http-loader    ^7.0.0  →   ^8.0.0</span><br><span class="line">@types&#x2F;jasmine                ~4.3.0  →   ~4.3.5</span><br><span class="line">angular-auth-oidc-client     ^15.0.4  →  ^16.0.0</span><br><span class="line">bootstrap                     ^5.2.3  →   ^5.3.1</span><br><span class="line">jasmine-core                  ~4.5.0  →   ~5.1.0</span><br><span class="line">jquery                        ^3.6.4  →   ^3.7.0</span><br><span class="line">karma                         ~6.4.0  →   ~6.4.2</span><br><span class="line">karma-chrome-launcher         ~3.1.0  →   ~3.2.0</span><br><span class="line">karma-coverage                ~2.2.0  →   ~2.2.1</span><br><span class="line">karma-jasmine-html-reporter   ~2.0.0  →   ~2.1.0</span><br><span class="line">ngx-bootstrap                ^10.2.0  →  ^11.0.2</span><br><span class="line">rxjs                          ~7.8.0  →   ~7.8.1</span><br><span class="line">tslib                         ^2.3.0  →   ^2.6.2</span><br><span class="line">typescript                    ~4.9.4  →   ~5.1.6</span><br></pre></td></tr></table></figure>

<p>執行更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ncu -u</span><br></pre></td></tr></table></figure>



<h3 id="書籍與課程"><a href="#書籍與課程" class="headerlink" title="書籍與課程"></a>書籍與課程</h3><p><a href="https://www.tenlong.com.tw/products/9787302529170?list_name=trs-t" target="_blank" rel="noopener">Angular 高級編程, 3/e</a> &amp; <a href="https://github.com/Apress/pro-angular-6" target="_blank" rel="noopener">原始碼</a><br><a href="https://www.tenlong.com.tw/products/9787302569572?list_name=srh" target="_blank" rel="noopener">Angular 高級編程, 4/e</a> &amp; <a href="https://github.com/Apress/pro-angular-9" target="_blank" rel="noopener">原始碼</a><br>因為舊版差異有點大 , 所以如果買舊版的話有噴 error 可以拿新版 code 來修看看<br>不管學啥技術只要看 freeman 的書就對啦! 以前有買一本 , 後來好像有新版的就沒追啦 , 記得以前剛學 asp.net mvc 的時候也是買他的書 XD , 算是人能看懂的書 , 不過他這本書好硬 , 整個都是用手打 component XD , 新手看的話應該陣亡</p>
<p><a href="https://www.accupass.com/event/2202160800111647084890" target="_blank" rel="noopener">will 保哥 Angular 新手開發練功坊</a> 去年特別自掏腰包上課 , 但後來都忙別的事 , 寫沒兩下就忘光了 XD</p>
<p><a href="https://www.youtube.com/watch?v=F-kn4gULkjA&list=PLneJIGUTIItu6QrNxEBAUgTXZaHIpO8D9&index=2" target="_blank" rel="noopener">凱哥寫程式</a> 2022 年佛心免費課程 ~</p>
<h3 id="其他資源"><a href="#其他資源" class="headerlink" title="其他資源"></a>其他資源</h3><p><a href="https://willh.gitbook.io/typescript-tutorial/basics" target="_blank" rel="noopener">typescript 新手指南</a><br><a href="https://stackblitz.com/" target="_blank" rel="noopener">stackblitz</a> 類似 codepen 的線上工具<br><a href="https://csharptotypescript.azurewebsites.net/" target="_blank" rel="noopener">c# to typescript</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/angular/" rel="tag"># angular</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/10/04/css-grid-%E7%AD%86%E8%A8%98/" rel="prev" title="css grid 筆記">
      <i class="fa fa-chevron-left"></i> css grid 筆記
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/10/11/sql-except-%E7%AD%86%E8%A8%98/" rel="next" title="sql except 筆記">
      sql except 筆記 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#vscode"><span class="nav-number">1.</span> <span class="nav-text">vscode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Angular-Cli"><span class="nav-number">2.</span> <span class="nav-text">Angular Cli</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#安裝"><span class="nav-number">2.1.</span> <span class="nav-text">安裝</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加入-eslint"><span class="nav-number">2.2.</span> <span class="nav-text">加入 eslint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ng-參數"><span class="nav-number">2.3.</span> <span class="nav-text">ng 參數</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#啟動"><span class="nav-number">3.</span> <span class="nav-text">啟動</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Debug"><span class="nav-number">4.</span> <span class="nav-text">Debug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注入"><span class="nav-number">5.</span> <span class="nav-text">注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Loading"><span class="nav-number">6.</span> <span class="nav-text">Loading</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引入外部資源-css-or-js"><span class="nav-number">7.</span> <span class="nav-text">引入外部資源 css or js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Extension"><span class="nav-number">8.</span> <span class="nav-text">Extension</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#vscode-1"><span class="nav-number">8.1.</span> <span class="nav-text">vscode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#visual-studio"><span class="nav-number">8.2.</span> <span class="nav-text">visual studio</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#chrome"><span class="nav-number">8.3.</span> <span class="nav-text">chrome</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#關閉-strict-mode"><span class="nav-number">9.</span> <span class="nav-text">關閉 strict mode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#editorconfig"><span class="nav-number">10.</span> <span class="nav-text">editorconfig</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用會忘了-import-的-module"><span class="nav-number">11.</span> <span class="nav-text">常用會忘了 import 的 module</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#檔名-amp-資料夾結構"><span class="nav-number">12.</span> <span class="nav-text">檔名 &amp; 資料夾結構</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Binding"><span class="nav-number">13.</span> <span class="nav-text">Binding</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Attribute-vs-Property"><span class="nav-number">13.1.</span> <span class="nav-text">Attribute vs Property</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Attrbitue-binding"><span class="nav-number">13.2.</span> <span class="nav-text">Attrbitue binding</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Property-binding"><span class="nav-number">13.3.</span> <span class="nav-text">Property binding</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Event-binding"><span class="nav-number">13.4.</span> <span class="nav-text">Event binding</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#雙向-香蕉-binding"><span class="nav-number">13.5.</span> <span class="nav-text">雙向&#x2F;香蕉 binding</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ngClass-binding"><span class="nav-number">13.6.</span> <span class="nav-text">ngClass binding</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ngStyle-binding"><span class="nav-number">13.7.</span> <span class="nav-text">ngStyle binding</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字串插值-binding-string-interpolation-binding"><span class="nav-number">13.8.</span> <span class="nav-text">字串插值 binding (string interpolation binding)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Lab-實作一隻烏龜"><span class="nav-number">13.9.</span> <span class="nav-text">Lab 實作一隻烏龜</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指令"><span class="nav-number">14.</span> <span class="nav-text">指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ngSwitch"><span class="nav-number">14.1.</span> <span class="nav-text">ngSwitch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ngFor"><span class="nav-number">14.2.</span> <span class="nav-text">ngFor</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日期問題"><span class="nav-number">15.</span> <span class="nav-text">日期問題</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#route"><span class="nav-number">16.</span> <span class="nav-text">route</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#net-6-整合"><span class="nav-number">17.</span> <span class="nav-text">.net 6 整合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SSR"><span class="nav-number">18.</span> <span class="nav-text">SSR</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#整合-openlayers"><span class="nav-number">19.</span> <span class="nav-text">整合 openlayers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#整合-openlayers-2"><span class="nav-number">20.</span> <span class="nav-text">整合 openlayers 2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TodoMVC-練習"><span class="nav-number">21.</span> <span class="nav-text">TodoMVC 練習</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TodoMVC-練習-http-版"><span class="nav-number">22.</span> <span class="nav-text">TodoMVC 練習 http 版</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建立後端-api"><span class="nav-number">22.1.</span> <span class="nav-text">建立後端 api</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建立前端"><span class="nav-number">22.2.</span> <span class="nav-text">建立前端</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#升級-angularjs-到-angular-常見問題"><span class="nav-number">23.</span> <span class="nav-text">升級 angularjs 到 angular 常見問題</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#搬遷步驟"><span class="nav-number">23.1.</span> <span class="nav-text">搬遷步驟</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fontawesome-5"><span class="nav-number">23.2.</span> <span class="nav-text">fontawesome 5</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ModuleMapLoaderModule-Error"><span class="nav-number">23.3.</span> <span class="nav-text">ModuleMapLoaderModule Error</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#proxy-asp-net-mvc-web-api"><span class="nav-number">23.4.</span> <span class="nav-text">proxy asp.net mvc web api</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解決-keyvalue-問題"><span class="nav-number">23.5.</span> <span class="nav-text">解決 keyvalue 問題</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解決-ng-keypress"><span class="nav-number">23.6.</span> <span class="nav-text">解決 ng-keypress</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bootstrap4-input-group-掛掉"><span class="nav-number">23.7.</span> <span class="nav-text">bootstrap4 input-group 掛掉</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修正-angularjs-filter-為-angular-pipe"><span class="nav-number">23.8.</span> <span class="nav-text">修正 angularjs filter 為 angular pipe</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#copy"><span class="nav-number">23.9.</span> <span class="nav-text">copy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常見對照"><span class="nav-number">23.10.</span> <span class="nav-text">常見對照</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#focus"><span class="nav-number">24.</span> <span class="nav-text">focus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多語系"><span class="nav-number">25.</span> <span class="nav-text">多語系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Breadcrumb-麵包屑"><span class="nav-number">26.</span> <span class="nav-text">Breadcrumb 麵包屑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#靜態資源路徑問題"><span class="nav-number">27.</span> <span class="nav-text">靜態資源路徑問題</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Loading-頁面"><span class="nav-number">28.</span> <span class="nav-text">Loading 頁面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#佈署到-iis"><span class="nav-number">29.</span> <span class="nav-text">佈署到 iis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#升級"><span class="nav-number">30.</span> <span class="nav-text">升級</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#升級-nodejs"><span class="nav-number">30.1.</span> <span class="nav-text">升級 nodejs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#升級-angular-cli"><span class="nav-number">30.2.</span> <span class="nav-text">升級 angular cli</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#安裝-npm-check-updates"><span class="nav-number">30.3.</span> <span class="nav-text">安裝 npm-check-updates</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#書籍與課程"><span class="nav-number">31.</span> <span class="nav-text">書籍與課程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他資源"><span class="nav-number">32.</span> <span class="nav-text">其他資源</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="🌹 喇賽人 🌹"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">🌹 喇賽人 🌹</p>
  <div class="site-description" itemprop="description">🌹 喇賽人的 Blog 🌹</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">309</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">118</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/weber87na" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;weber87na" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

	  <!-- skilltree 廣告 -->
	  <div id="myadblock" style="margin-top:25px;position:relative">
	  <div id="myadblock-title" style="position:absolute;left:-10px;top:-10px;width:100px;background-color:rgba(0,0,0,.75);color:white;">偷放工商</div>
	  <script src="https://skilltree.my/promotion/cec9b4b0-be5e-4727-85c6-f7af5445124a?w=350"></script>
	  </div>

	  <!-- google 廣告 -->
	  <!--
	  <ins class="adsbygoogle"
		  style="display:inline-block;width:220px;height:120px;margin-top:50px;position:relative;border-bottom-left-radius: 15px 255px;border-bottom-right-radius: 225px 15px;border-top-left-radius: 255px 15px;border-top-right-radius: 15px 225px;border: 2px solid #41403e;"
		  data-ad-client="ca-pub-1069539516107706"
		  data-ad-slot="6588270137">
	  <div id="myadblock-title2" style="z-index:999999;position:absolute;left:-10px;top:-10px;width:100px;background-color:rgba(0,0,0,.75);color:white;">偷放工商</div>
	  </ins>
	  <script>
		  (adsbygoogle = window.adsbygoogle || []).push({});
	  </script>
	  -->

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">喇賽的人! G__G+</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">總廢話字數：</span>
    <span title="總廢話字數">1.6m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">所需總浪費時間 &asymp;</span>
    <span title="所需總浪費時間">24:04</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://la-sai-de-ren.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://www.blog.lasai.com.tw/2022/10/11/angular-%E7%AD%86%E8%A8%98/";
    this.page.identifier = "2022/10/11/angular-筆記/";
    this.page.title = "angular 筆記";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://la-sai-de-ren.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>


  <!-- <div class="snow1" style="position:fixed !important"></div> -->
  <div class="cobweb" style="position:fixed !important"></div>
  <div class="spider" style="position:fixed !important"></div>
<div class="fswitch">關閉</div>
<div class="snowflakes" aria-hidden="true">
  <div class="snowflake">
 🌹
  </div>
  <div class="snowflake">
 💩
  </div>
  <div class="snowflake">
 🌹
  </div>
  <div class="snowflake">
 💩
  </div>
    <div class="snowflake">
 🌹
  </div>
  <div class="snowflake">
 💩
  </div>
    <div class="snowflake">
 🌹
  </div>
  <div class="snowflake">
 💩
  </div>
</div>

<!--
<script>
	function toggleSpell() {
		let spell = document.getElementsByClassName('spell')[0];
		let ghost = document.getElementsByClassName('ghost')[0];
		let noise = document.getElementsByClassName('noise')[0];
		let noise2 = document.getElementsByClassName('noise2')[0];
		if (spell.style.display === 'none') {
			spell.style.display = 'block';
			noise.style.display = '';
			noise2.style.display = '';
			ghost.style.display = 'none';
		} else {
			spell.style.display = 'none';
			noise.style.display = 'none';
			noise2.style.display = 'none';
			ghost.style.display = 'block';
		}
	}

	//訂閱內容
	let spell = document.getElementsByClassName('spell')[0];
	let ghost = document.getElementsByClassName('ghost')[0];
	spell.addEventListener('click',toggleSpell);
	ghost.addEventListener('click',toggleSpell);
</script>
-->

<script>

let cobweb = document.querySelector('.cobweb');
let spider = document.querySelector('.spider');
let back = document.querySelector('.back-to-top');
let fswitch = document.querySelector('.fswitch');

document.addEventListener('keydown', function(event) {
	if (event.key === 'f') {
		console.log('press f key');
		ftoggle();
	}
});

fswitch.addEventListener('click' , function(){ 
	ftoggle();
});

function ftoggle(){
	if(cobweb.style.display === ''){
		cobweb.style.display = 'none';
	}else{
		cobweb.style.display = '';
	}
	if(spider.style.display === ''){
		spider.style.display = 'none';
	}else{
		spider.style.display = '';
	}
	if(back.style.display === ''){
		back.style.display = 'none';
	}else{
		back.style.display = '';
	}

	if(fswitch.innerText === '關閉') fswitch.innerText = '乖乖'
	else fswitch.innerText = '關閉'
}



</script>

<script>
class ViNavigation {
  constructor() {
    this.Mode = {
      Normal: "normal",
      Motion: "motion",
    };

    this.lastKeyPressTime = 0;
    this.lastKeyPressed = "";
    this.currentMode = this.Mode.Normal;

    //可使用移動的字碼
    //共 18 個字 排除 vi 會用到的字
    this.tagChars = "ABCEILNOPQRSTVWXYZ";

    //目前的 vim 標示字標籤 array
    this.holdTags = new Array();

    //預先建立兩字組合的字典
    this.dict = new Array();
    //雙層迴圈灌入所有兩字組合
    for (var i = 0; i < this.tagChars.length; i++) {
      for (var j = 0; j < this.tagChars.length; j++) {
        this.dict.push(this.tagChars[i] + this.tagChars[j]);
      }
    }
  }

  viGoTop(keyPressed) {
    if (keyPressed === "g") {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  }

  viGoBottom(keyPressed) {
    if (keyPressed === "G") {
      console.log("document.body.scrollHeight", document.body.scrollHeight);
      let h = Math.max(
        Math.max(
          document.body.scrollHeight,
          document.documentElement.scrollHeight
        ),
        Math.max(
          document.body.offsetHeight,
          document.documentElement.offsetHeight
        ),
        Math.max(
          document.body.clientHeight,
          document.documentElement.clientHeight
        )
      );
      window.scrollTo({ top: h, behavior: "smooth" });
    }
  }

  viFastDown(keyPressed) {
    if (keyPressed === "d") {
      this.move(350);
    }
  }

  viDown(keyPressed) {
    if (keyPressed === "j") {
      this.move(100);
    }
  }

  viFastUp(keyPressed) {
    if (keyPressed === "u") {
      this.move(-350);
    }
  }

  viUp(keyPressed) {
    if (keyPressed === "k") {
      this.move(-100);
    }
  }

  move(val) {
    var currentPosition =
      window.pageYOffset || document.documentElement.scrollTop;
    window.scrollTo({
      top: currentPosition + val,
      behavior: "smooth",
    });
  }

  removeViTags() {
    let allTags = document.querySelectorAll(".vim-tag");
    allTags.forEach(function (tag) {
      tag.parentNode.removeChild(tag);
    });
  }

  createViTag(text, href, top, left) {
    let newDiv = document.createElement("div");
    newDiv.classList.add("vim-tag");
    newDiv.style.fontFamily = "Arial, sans-serif";
    newDiv.style.fontSize = "12px";
    newDiv.style.position = "absolute";
    newDiv.style.backgroundColor = "#89CF07";
    newDiv.style.color = "black";
    newDiv.style.padding = "2px";
    newDiv.style.borderRadius = "2px";
    newDiv.style.zIndex = "999999";

    newDiv.textContent = text;
    newDiv.dataset.href = href;
    newDiv.style.top = top;
    newDiv.style.left = left;
    return newDiv;
  }

  createViTags() {
    let allTags = document.querySelectorAll("a");
    let counter = 0;
    for (let tag of allTags) {
      let rect = tag.getBoundingClientRect();
      let href = tag.href;
      //這個距離需要加入卷軸距離才會正確
      let top = window.scrollY + rect.top + "px";
      let left = window.scrollX + rect.left + "px";
      let text = "";
      if (allTags.length <= this.tagChars.length) {
        text = this.tagChars[counter];
        this.holdTags.push(text);
      } else {
        text = this.dict[counter];
        this.holdTags.push(text);
      }
      let newDiv = this.createViTag(text, href, top, left);
      document.body.appendChild(newDiv);
      counter++;
    }
  }

  //找出目前的首字 array
  firstCharArray() {
    let result = [];
    for (let i = 0; i < this.holdTags.length; i++) {
      let text = this.holdTags[i];
      if (text) {
        let theChar = text[0].toLowerCase();
        if (result.includes(theChar) === false) {
          result.push(theChar);
        }
      }
    }

    return result;
  }

  toggleMotion() {
    this.currentMode = this.Mode.Motion;
    this.lastKeyPressed = "";
    console.log("mode", this.currentMode);
    this.createViTags();
  }

  toggleNormal() {
    this.currentMode = this.Mode.Normal;
    console.log("mode", this.currentMode);
    this.removeViTags();
    this.holdTags = [];
    this.lastKeyPressed = "";
  }

  handleKeyDown(event) {
    let currentTime = new Date().getTime();
    let keyPressed = event.key;

    //按下 F 時進入 motion 模式
    if (this.currentMode === this.Mode.Normal && keyPressed === "F") {
      this.toggleMotion();
      return;
    }

    //按下 esc 跳離 motion 模式回到 normal 模式
    if (this.currentMode === this.Mode.Motion && keyPressed === "Escape") {
      this.toggleNormal();
      return;
    }

    //當 motion 一個字時才走這模式
    if (
      this.currentMode === this.Mode.Motion &&
      document.querySelectorAll("a").length <= this.tagChars.length &&
      this.tagChars.toLowerCase().includes(keyPressed)
    ) {
      console.log("one char mode");
      let allTags = document.querySelectorAll(".vim-tag");

      allTags.forEach(function (tag) {
        if (tag.textContent.toLowerCase() === keyPressed) {
          window.location.href = tag.dataset.href;
        }
      });

      this.toggleNormal();
      return;
    }

    //當 motion 兩個字才走這個模式
    if (
      this.currentMode === this.Mode.Motion &&
      document.querySelectorAll("a").length > this.tagChars.length
    ) {
      console.log("motion lastKeyPressed", this.lastKeyPressed);
      console.log("motion current", keyPressed);

      if (!this.lastKeyPressed) {
        //如果出現字表以外的字則回到 normal
        //console.log("firstCharArray", this.firstCharArray());
        if (this.firstCharArray().includes(keyPressed) === false) {
          this.toggleNormal();
          return;
        } else {
          let allTags = document.querySelectorAll(".vim-tag");
          allTags.forEach(function (tag) {
            if (tag.textContent[0].toLowerCase() !== keyPressed) {
              tag.parentNode.removeChild(tag);
            }

            //將第一個字變為紅色
            if (tag.textContent[0].toLowerCase() === keyPressed) {
              tag.innerHTML =
                '<span style="color: red;">' +
                tag.textContent.charAt(0) +
                "</span>" +
                tag.textContent.substring(1);
            }
          });
        }
      }

      //如果有字的話才執行
      if (this.lastKeyPressed) {
        let chars = this.lastKeyPressed + keyPressed;
        console.log("chars", chars);
        let allTags = document.querySelectorAll(".vim-tag");
        allTags.forEach(function (tag) {
          if (tag.textContent.toLowerCase() === chars) {
            window.location.href = tag.dataset.href;
          }
        });
        //萬一沒找到切回 Normal
        this.toggleNormal();
        return;
      }
    }

    // 任何模式按兩下的區域
    if (
      keyPressed === this.lastKeyPressed &&
      currentTime - this.lastKeyPressTime < 300
    ) {
      this.viGoTop(keyPressed);
    }

    // 按一下的區域
    this.viGoBottom(keyPressed);
    this.viDown(keyPressed);
    this.viFastDown(keyPressed);
    this.viUp(keyPressed);
    this.viFastUp(keyPressed);

    this.lastKeyPressTime = currentTime;
    this.lastKeyPressed = keyPressed;
  }

  init() {
    document.addEventListener("keydown", this.handleKeyDown.bind(this));
  }
}

const viNavigation = new ViNavigation();
viNavigation.init();
</script>



</body>
</html>
