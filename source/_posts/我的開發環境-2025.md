---
title: 我的開發環境 2025
date: 2025-03-08 03:35:39
tags:
---
&nbsp;
<!-- more -->

最近因為離職很低落的關係, 人燒了, 沒想到機器也跟著一起燒了, 只好噴錢搞台新的筆電來辦公, 換成 win11 還真不習慣

## 改回 win10 舊版選單
上來第一件事就是把開始右鍵改回舊版模式
```
"reg add "HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32" /f /ve"
```

## 輸入法切換
因為自己比較習慣用 `win + space` 切換, 這樣 intellisense 才不會衝突, 詳細 [請看保哥](https://blog.miniasp.com/post/2020/03/19/Devs-must-setup-multi-language-input-method) 核心就這四句

```
$UserLanguageList = New-WinUserLanguageList -Language "zh-TW"
$UserLanguageList.Add("en-US")
Set-WinUserLanguageList -LanguageList $UserLanguageList -Force
Set-WinDefaultInputMethodOverride -InputTip "0409:00000409"
```

## 鍵盤問題
我這個鍵盤沒有 `home` 跟 `end` 他跟右邊數字 `7` 共用, 研究下發現要按 `fn` + `7` 就能用 `home`
不然就是把 `NumLk` 開啟直接把他變成 `home`

另外以前打 cs1.6 有一招急停步, 當時候會這樣調整, 可以讓鍵盤響應更快
`win + r` => `control panel` => `keyboard` => `重複延遲設定最短` => `重複速度設定最快`

## sudo 
本來想說都上 win11 應該可以直接用 sudo 沒想到要 `24h2` 版本, 看著網路上的災情還是果斷放棄 XD

後來還是升級上去 `24h2` 就順便玩看看, 可以參考[官方](https://learn.microsoft.com/zh-tw/windows/sudo/)

`win` => `設定` => `系統` => `開發人員專用` => `啟用 sudo`

## gsudo
乖乖回去裝 [gsudo](https://github.com/gerardog/gsudo) 才不用每次都要管理員權限很難按

winget 在 win11 就直接有了

```
winget install gerardog.gsudo
```

## wsl
只要執行無腦命令 `wsl --install` 就搞定了, 印象中以前還要一堆麻煩步驟

如果想快速從 windows 開啟 wsl 檔案位置的話可以找到這個路徑 
`\\wsl.localhost\Ubuntu\home`

或是直接在 wsl 裡面敲這個命令, 即可開啟目前 `wsl` 位置
```
explorer.exe .
```

## chrome
雖然有 edge 但是 [chrome](https://www.google.com/intl/zh-TW/chrome/?brand=YTUH&gclid=Cj0KCQjw3eeXBhD7ARIsAHjssr8oKWGTMVDaA16mwksZ0TJhTpE7StFhrqeDUoQukMZjB-kPKpxNmFgaAlHkEALw_wcB&gclsrc=aw.ds) 用得更習慣些
身為 vim 的愛好者不免俗還是要安裝下 [Vimium](https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb)

不曉得啥時開始 chrome console 會噴這個警告讓你不能貼 code 上去, 這個真是擾民!

```
Warning: Don’t paste code into the DevTools Console that you don’t understand or haven’t reviewed yourself. This could allow attackers to steal your identity or take control of your computer. Please type ‘allow pasting’ below and hit Enter to allow pasting.
```

只要敲入 `allow pasting` 就能解, 但是通常會忘記這串要手敲不能貼上 XD

## 7zip
不曉得哪年開始都用 [7zip](https://www.7-zip.org/) 就放生 [winrar](https://rar.tw/) 二擇一即可

## firacode
不多說, coding 字體

https://github.com/tonsky/FiraCode

安裝法就解壓後對著 `ttf` => `右鍵` => `為所有使用者安裝` 即可

## nerdfonts
https://www.nerdfonts.com/font-downloads

這個最好也下載, 設樣才會在 windows terminal 有好看的 icon, 我自己習慣用 `FiraCode Nerd Font`

## notepad++
身為一個打字員 [notepad++](https://notepad-plus-plus.org/downloads/) 應該是必備工具, 雖然是 vim 的愛好者, 不過這個也是無可取代

設定字體的話要找到 `設定` => `語法樣式配置器` 改成喜歡的字體即可

## NotepadReplacer
裝了 notepad++ 第一件事就是安裝 [NotepadReplacer](https://www.binaryfortress.com/NotepadReplacer/) 好把預設的 `notepad` 命令換掉, 指令也少打兩個 ++

## postman
[postman](https://www.postman.com/downloads/) 如果可以的話也是不太想裝他, 偏偏 curl 命令也忘得差不多

## powershell 相關設定
因為 `powershell5` 沒那麼好用, 所以直接上 `powershell7`

即使到了 win11 預設還是 powershell 5.1

https://learn.microsoft.com/zh-tw/powershell/scripting/whats-new/migrating-from-windows-powershell-51-to-powershell-7?view=powershell-7.4

下載後執行以下設定

開啟 admin 設定允許執行 `Microsoft.PowerShell_profile.ps1`
```
gsudo Set-ExecutionPolicy RemoteSigned
```

安裝 `Terminal-Icons` 模組
```
gsudo Install-Module -Name Terminal-Icons -Repository PSGallery
```

建立 `powershell` 的 `profile` 這裡要注意看是 `powershell5` or `powershell7`

```
cd Documents
#powershell5
#mkdir WindowsPowerShell
#cd WindowsPowerShell

#powershell7
mkdir PowerShell
cd PowerShell
New-Item "Microsoft.PowerShell_profile.ps1"
```

撰寫設定 
```
notepad $profile
```

另外想要設定 `ctrl+v` 為貼上的話可以到 `設定` => `動作` => `新增動作` 然後把 `ctrl+v` 補上即可

## full powershell config

```
#清除開頭煩人的訊息
Clear-Host

#emacs 模式
Set-PSReadLineOption -EditMode Emacs

#設定 tab 補全
Set-PSReadlineKeyHandler -Chord Tab -Function MenuComplete

#開啟歷史提示
Set-PSReadLineOption -PredictionSource History

#列表模式
Set-PSReadLineOption -PredictionViewStyle ListView

#改用 starship
Invoke-Expression (&starship init powershell)

#美化 icon
Import-Module -Name Terminal-Icons

#設定 linux curl wget 而非 powershell 的功能
IF (Test-Path Alias:curl) { Remove-Item Alias:curl }
IF (Test-Path Alias:wget) { Remove-Item Alias:wget }

#開啟 hosts
function hosts { notepad C:\windows\system32\drivers\etc\hosts }

#開啟 vsvimrc
function vsvimrc { notepad $HOME\_vsvimrc }

#開啟 vscode 的 settings.json
function codesettings { notepad $env:APPDATA\Code\User\settings.json }

#tig
function tig { & "C:\Program Files\Git\usr\bin\tig.exe" }

#取得目前的 git repo
function current-repo { start chrome (git config remote.origin.url).Replace(".git","") }

#清除啟動以後的訊息
clear
```


## starship
放生 oh-my-posh XD 改用 starship
https://starship.rs/

安裝
```
winget install starship
```

記得要把設定加進去 powershell 的 `$profile`

```
Invoke-Expression (&starship init powershell)
```

這裡設定完後記得要在 windows terminal 做以下設定, 不然 powershell 裡面設定 `Terminal-Icons` 模組是跑不出好看的圖示低

`設定` => `預設值` => `外觀` => `字體` => `FiraCode Nerd Font`

## github

```
ssh-keygen
#SHA256:XXXXX yourname@yourpcname

cd .ssh/
cat xxx.pub
#ssh-ed25519 xxxxx//xxxxx yourname@yourpcname
```

萬一 commit git 噴以下錯誤, 請到這網址設定 `token` https://github.com/settings/tokens
```
Username for 'https://github.com': yourname
Password for 'https://yourname@github.com':
remote: Support for password authentication was removed on August 13, 2021.
remote: Please see https://docs.github.com/get-started/getting-started-with-git/about-remote-repositories#cloning-with-https-urls for information on currently recommended modes of authentication.
fatal: Authentication failed for 'https://github.com/yourname/yourname.github.io.git/'
```

## PowerToys

會想安裝這個是因為長久以來一直都想把 `Caps Lock` 這個鍵改成 `Esc` 讓用 vim 時輕鬆點
另外新版電腦有 `Copilt` 這個按鍵佔據了右側的 `ctrl`, 也希望把它改為 `ctrl`
`Copilt` 鍵的原意是 `Win (Left)` + `Shift (Left)` + `F23`

修改方法可以看這個討論
https://answers.microsoft.com/en-us/windows/forum/all/how-can-i-customize-the-copilot-key-to-also/b651a831-8982-4843-b1eb-2aa555de6b45

[PowerToys](https://github.com/microsoft/PowerToys) 安裝如下
```
winget install Microsoft.PowerToys -s winget
```

## 顯示按鍵
之前都是用 `carnac` 這套
後來發現這個 [討論](https://github.com/microsoft/PowerToys/issues/981) 裡面有些其他同性質的, 不過用起來舊愛還是最美 LOL

https://github.com/Code52/carnac - Unmaintained, does not work on most applications
https://github.com/Phaiax/Key-n-Stroke
https://github.com/marius-sucan/KeyPress-OSD - Commercial version available
https://github.com/Jagailo/YetAnotherKeyDisplayer
https://github.com/mulaRahul/keyviz - Quite new and looks good


## anaconda
這次發現 [官網](https://www.anaconda.com/download) 又改版了 XD
要直接下載的話有個很小的字 `Skip registration` 哪天跟 Oracle 一樣都要登入才能下載也不意外了

安裝好後設定以下路徑到 `Path` 環境變數底下, 可以用 `PowerToys` 設定會更人性一點
```
C:\Users\youruser\anaconda3
C:\Users\youruser\anaconda3\Scripts
C:\Users\youruser\anaconda3\Library\bin
```

每次安裝 `anaconda` 多多少少都有些驚喜跟意外, 沒有一次正常過的..
這次因為用 `powershell 7.5` `conda 24.11` 然後執行 `conda init` 以後就會噴以下錯誤
```
usage: conda-script.py [-h] [-v] [--no-plugins] [-V] COMMAND ...
conda-script.py: error: argument COMMAND: invalid choice: '' (choose from 'activate', 'deactivate', 'clean', 'compare', 'config', 'create', 'env', 'export', 'info', 'init', 'install', 'list', 'notices', 'package', 'remove', 'uninstall', 'rename', 'run', 'search', 'update', 'upgrade', 'build', 'content-trust', 'convert', 'debug', 'develop', 'doctor', 'index', 'inspect', 'metapackage', 'render', 'repoquery', 'skeleton', 'server', 'token', 'repo', 'pack')
Invoke-Expression: Cannot bind argument to parameter 'Command' because it is an empty string.
```

丟 chatgpt 問半天也問不出個毛, 然後 google 發現一堆老外一樣[哀鴻遍野](https://github.com/conda/conda/issues/14292) LOL ~
檢查 `powershell` 及 `conda` 版本命令如下

```
$PSVersionTable.PSVersion
conda -V
```

照老外說 `conda 25.x` 就會正常, 然後執行 `conda` 更新根本就不會動 XD 還是停在 `24.x`
```
conda update conda
```

後來發現這個[強國人](https://naiv.fun/Ops/118.html) 有現成解法
```
conda install -n base conda=25.1.1 -c conda-forge --override-channels --yes
conda init --reverse
conda init
```

不過他是用 `oh-my-posh` 我是用 `starship` 沒啥大問題, 唯一就是預設不會顯示 `base` 環境
如果 `starship` 要正確顯示出目前 `base` 環境可以參考[這篇](https://github.com/starship/starship/issues/6322)
```
starship config conda.ignore_base false
```

最後就會長這樣, 灑花 ~
```
~ 🅒 base
🌹
```

## SSMS
[下載位置](https://learn.microsoft.com/zh-tw/ssms/download-sql-server-management-studio-ssms)

這次安裝就直接發生意外了, 因為之前測試 vanna ai 有安裝 `Microsoft ODBC Driver 17 for SQL Server` 結果噴這個錯誤 `0x80070643`
還好解法滿簡單的可以參考這篇[官方說明](https://learn.microsoft.com/zh-tw/ssms/troubleshoot/install-failed-requires-restart?view=sql-server-ver16)
只要把 `Microsoft ODBC Driver 17 for SQL Server` 解除安裝然後重開電腦, 接著安裝 SSMS 即可

安裝好當然要測下能否動, 因為我先安裝 visual studio 所有有 localdb
連線字串在此 `(LocalDB)\MSSQLLocalDB`
正常連線後設定英文 `工具` => `選項` => `環境` => `國際設定` => `English`
其他應該沒啥要調的, 都 2025 了還是沒辦法用 vim QQ ~